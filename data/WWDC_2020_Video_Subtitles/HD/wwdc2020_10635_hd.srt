1
00:00:03,670 --> 00:00:06,673 line:-1
Hello, and welcome to WWDC.


2
00:00:09,042 --> 00:00:13,480 line:0
Greetings, racing fans, and welcome to
"Accelerate Your App with CarPlay."


3
00:00:13,547 --> 00:00:17,017 line:-2
I'm Jonathan Hersh
from iOS Car Experience.


4
00:00:17,084 --> 00:00:22,456 line:-2
Today, we're going to add an amazing
car experience to your apps with CarPlay.


5
00:00:22,523 --> 00:00:24,391 line:-1
Buckle up, and away we go.


6
00:00:24,992 --> 00:00:26,527 line:-1
If you've driven with CarPlay,


7
00:00:26,593 --> 00:00:30,597 line:-2
you're probably familiar with some
incredible third-party navigation apps,


8
00:00:30,664 --> 00:00:32,366 line:-1
like Waze and Google Maps.


9
00:00:32,900 --> 00:00:37,905 line:-2
These navigation apps built their CarPlay
experience with the CarPlay framework,


10
00:00:37,971 --> 00:00:41,208 line:-1
a set of APIs first introduced in iOS 12.


11
00:00:41,708 --> 00:00:45,045 line:-2
The CarPlay framework provides
several types of template objects,


12
00:00:45,112 --> 00:00:49,349 line:-2
which your app can configure
to build an amazing CarPlay experience.


13
00:00:50,017 --> 00:00:55,022 line:-2
But until now, CarPlay templates have only
been available to navigation apps.


14
00:00:56,723 --> 00:01:01,128 line:0
Today, we are thrilled to announce
a brand-new set of CarPlay templates,


15
00:01:01,195 --> 00:01:04,498 line:0
plus some amazing improvements
to existing templates,


16
00:01:04,565 --> 00:01:08,101 line:0
that together make CarPlay available
to a whole new set of apps


17
00:01:08,168 --> 00:01:10,437 line:0
for the first time in iOS 14.


18
00:01:11,271 --> 00:01:14,808 line:-2
iOS 14 introduces several new templates
for audio apps.


19
00:01:14,875 --> 00:01:19,713 line:-2
Apple Books has created an amazing
new CarPlay experience for your audiobooks


20
00:01:19,780 --> 00:01:22,716 line:-1
in iOS 14 with these new audio templates.


21
00:01:23,050 --> 00:01:25,986 line:-2
If you've built
a CarPlay audio app before,


22
00:01:26,053 --> 00:01:29,556 line:-2
you're probably familiar
with the playable content API.


23
00:01:29,623 --> 00:01:33,026 line:-2
In iOS 14,
playable content will be deprecated.


24
00:01:33,093 --> 00:01:37,998 line:-2
Audio templates open up a whole new world
of possibilities for your audio apps.


25
00:01:38,832 --> 00:01:41,702 line:-2
We're introducing new templates
for communication apps,


26
00:01:41,768 --> 00:01:43,770 line:-1
like messaging and calling apps.


27
00:01:44,738 --> 00:01:49,076 line:-2
We have new templates to drive
your EV charging and parking apps.


28
00:01:50,010 --> 00:01:54,214 line:-2
And we have new templates that support
quick-service restaurants in CarPlay.


29
00:01:54,548 --> 00:01:57,618 line:-2
We're going to take a scenic drive
through all of these new templates


30
00:01:57,684 --> 00:01:59,019 line:-1
in just a few minutes.


31
00:01:59,419 --> 00:02:02,523 line:-2
But first,
let's review some design principles


32
00:02:02,589 --> 00:02:05,659 line:-2
that you should keep in mind
while building your app in CarPlay.


33
00:02:06,260 --> 00:02:09,963 line:-2
CarPlay is designed for the driver,
not for passengers.


34
00:02:10,030 --> 00:02:14,067 line:-2
Think about optimizing your app
for tasks that make sense in the car.


35
00:02:16,236 --> 00:02:18,105 line:-1
CarPlay apps are purposeful.


36
00:02:18,605 --> 00:02:21,441 line:-2
Start with the most common scenarios
in your app


37
00:02:21,508 --> 00:02:25,546 line:-2
and distill them down to glanceable,
streamlined interactions,


38
00:02:25,612 --> 00:02:30,150 line:-2
each interaction being a task the driver
can complete in just a few seconds.


39
00:02:32,152 --> 00:02:35,422 line:-2
Whenever possible,
reuse configuration from your app


40
00:02:35,489 --> 00:02:39,893 line:-2
to minimize or eliminate any setup
your user has to do in CarPlay.


41
00:02:40,694 --> 00:02:42,696 line:-1
Your app's first-run experience


42
00:02:42,763 --> 00:02:46,900 line:-2
should already be completed on-device
before the user starts driving.


43
00:02:48,936 --> 00:02:54,274 line:-2
And remember, your app may be launched
first in CarPlay, and only in CarPlay.


44
00:02:55,008 --> 00:02:58,378 line:-2
When the user taps your app
on the CarPlay home screen,


45
00:02:58,445 --> 00:03:01,982 line:-2
your app will connect to a car scene,
not an iPhone scene.


46
00:03:02,783 --> 00:03:06,220 line:-2
So it's very important that you eliminate
any logic in your app


47
00:03:06,286 --> 00:03:08,522 line:-1
that depends on being launched on iPhone.


48
00:03:10,290 --> 00:03:12,860 line:-1
This is easy to do with UIScene,


49
00:03:12,926 --> 00:03:17,364 line:-2
and in fact, your app must adopt UIScene
to use the CarPlay framework,


50
00:03:17,431 --> 00:03:21,101 line:-2
so you'll want to transition away
from the legacy UIWindow


51
00:03:21,168 --> 00:03:23,904 line:-1
and UIApplicationDelegate APIs.


52
00:03:25,005 --> 00:03:27,341 line:-1
And with those design principles in mind,


53
00:03:27,407 --> 00:03:30,878 line:-2
let's take a drive through
new CarPlay templates for audio apps.


54
00:03:30,944 --> 00:03:34,314 line:-2
And even if you're not developing
an audio app, stay tuned,


55
00:03:34,381 --> 00:03:37,284 line:-2
because your app
can use some of these new templates too.


56
00:03:38,652 --> 00:03:40,854 line:-1
I mentioned a minute ago that until now,


57
00:03:40,921 --> 00:03:43,123 line:-2
if you were building an audio app
for CarPlay,


58
00:03:43,190 --> 00:03:45,826 line:-2
you would implement
the playable content API.


59
00:03:46,360 --> 00:03:49,229 line:-1
Playable content is a metadata-based API.


60
00:03:49,296 --> 00:03:52,799 line:-2
You describe your app's data,
like albums and songs,


61
00:03:52,866 --> 00:03:56,503 line:-2
and the system assembles
a tree-style UI on your behalf.


62
00:03:57,171 --> 00:04:01,775 line:-2
Keep in mind that if you want to deploy
your app to iOS 13 and earlier,


63
00:04:01,842 --> 00:04:05,779 line:-2
playable content and audio templates
can coexist in your app.


64
00:04:06,713 --> 00:04:11,885 line:-2
On iOS 13 and earlier, the system will
launch your app with playable content.


65
00:04:12,319 --> 00:04:13,921 line:-1
And in iOS 14,


66
00:04:13,987 --> 00:04:17,524 line:-2
the system will launch with your CarPlay
templates if you've provided them.


67
00:04:18,225 --> 00:04:19,959 line:-1
So let's take a look at converting


68
00:04:20,027 --> 00:04:23,063 line:-2
your playable content app's life cycle
to CarPlay templates.


69
00:04:24,598 --> 00:04:25,799 line:-1
Now, I mentioned earlier


70
00:04:25,866 --> 00:04:29,169 line:-2
that you'll need to adopt UIScene
to use CarPlay templates,


71
00:04:29,236 --> 00:04:31,738 line:-2
and here you can see
just how easy that is.


72
00:04:32,306 --> 00:04:37,911 line:-2
A key part of adopting UIScene is
declaring a Scene Manifest for your app.


73
00:04:37,978 --> 00:04:43,217 line:-2
You can add this manifest to your app's
Info.plist as a new top-level key.


74
00:04:44,484 --> 00:04:49,656 line:-2
This is a sample scene configuration for
the CarPlay template application scene.


75
00:04:49,723 --> 00:04:53,594 line:-2
You'll want to specify a scene
configuration for your CarPlay scene,


76
00:04:53,660 --> 00:04:58,332 line:-2
like this example, in addition to a scene
configuration for your app on iPhone.


77
00:04:59,032 --> 00:05:00,634 line:-1
If you're building a navigation app,


78
00:05:00,701 --> 00:05:04,204 line:-2
you can also provide a scene configuration
for the CarPlay dashboard.


79
00:05:05,506 --> 00:05:08,141 line:-1
We're also specifying the name of a class


80
00:05:08,208 --> 00:05:11,845 line:-2
that serves as the scene delegate
in your app for the CarPlay scene.


81
00:05:12,646 --> 00:05:17,150 line:-2
Here, we're implementing the class that
we specified in our scene configuration.


82
00:05:17,217 --> 00:05:19,019 line:-1
This is the connect method from


83
00:05:19,086 --> 00:05:23,590 line:-2
the CPTemplateApplicationSceneDelegate
protocol in the CarPlay framework.


84
00:05:24,391 --> 00:05:26,527 line:-2
The CarPlay framework
calls this connect method


85
00:05:26,593 --> 00:05:29,196 line:-2
when your app has been launched
on the CarPlay screen.


86
00:05:30,898 --> 00:05:35,102 line:-2
First, you'll probably want to hold onto
this CPInterfaceController object,


87
00:05:35,169 --> 00:05:36,603 line:-1
because you'll need it later.


88
00:05:38,438 --> 00:05:42,543 line:0
And here, I'm setting a CPListTemplate
as my app's root template,


89
00:05:42,609 --> 00:05:44,211 line:0
and it's just that easy.


90
00:05:44,278 --> 00:05:47,047 line:0
We now have a template on the car screen.


91
00:05:47,114 --> 00:05:49,116 line:0
And here, in the disconnect method,


92
00:05:49,183 --> 00:05:51,985 line:0
we can release the interface controller
that we were holding.


93
00:05:53,253 --> 00:05:56,423 line:0
Let's look at the list template
in a little bit more detail.


94
00:05:56,490 --> 00:05:58,859 line:-1
We'll start by creating a list item.


95
00:05:58,926 --> 00:06:02,629 line:-2
Each list item represents a single row
in our list template.


96
00:06:03,063 --> 00:06:05,866 line:-2
Here, I'm starting with just a title
and subtitle


97
00:06:05,933 --> 00:06:08,101 line:-1
in a list template with a single section.


98
00:06:10,370 --> 00:06:14,608 line:-2
When the user selects your list item,
the list item handler will be called.


99
00:06:14,975 --> 00:06:17,377 line:-1
The handler receives two arguments.


100
00:06:17,444 --> 00:06:19,847 line:-2
The first is the list item
that was selected,


101
00:06:19,913 --> 00:06:21,982 line:-1
and the second is a completion block.


102
00:06:23,483 --> 00:06:27,454 line:-2
When a list item is selected,
your app probably has some work to do.


103
00:06:27,821 --> 00:06:32,125 line:-2
For example, you might initiate playback
of the item that the user selected,


104
00:06:32,192 --> 00:06:35,495 line:-2
or you might configure and present
a new template.


105
00:06:35,896 --> 00:06:39,433 line:-2
After you finish any work,
you must call the completion block.


106
00:06:39,499 --> 00:06:43,370 line:-2
But if you don't immediately call
the completion block, that's okay.


107
00:06:44,404 --> 00:06:49,076 line:-2
CarPlay will display a spinner to
let the user know that your app is busy.


108
00:06:49,142 --> 00:06:50,978 line:-1
When you call the completion block,


109
00:06:51,044 --> 00:06:55,048 line:-2
that signals to CarPlay that you've
finished processing the user's selection,


110
00:06:55,115 --> 00:06:57,985 line:-2
and CarPlay will remove the spinner
from your list item.


111
00:06:59,953 --> 00:07:05,158 line:-2
Also new in iOS 14, we've added
support for dynamic list item updates.


112
00:07:05,225 --> 00:07:10,797 line:-2
Many properties on CPListItem that were
previously read-only are now writable.


113
00:07:10,864 --> 00:07:13,734 line:-2
In this example,
it might take my app some time


114
00:07:13,800 --> 00:07:16,770 line:-2
to fetch an album artwork image
over the network.


115
00:07:18,672 --> 00:07:23,410 line:-2
Updating my list item to show that image
is as easy as assigning a value


116
00:07:23,477 --> 00:07:26,446 line:-2
to the newly writable image property
in the list item,


117
00:07:26,513 --> 00:07:30,284 line:-2
and CarPlay will automatically reload
only the affected rows


118
00:07:30,350 --> 00:07:31,685 line:-1
in your list template.


119
00:07:31,752 --> 00:07:33,387 line:-1
It's like magic.


120
00:07:33,453 --> 00:07:37,324 line:-2
For example,
Apple Podcasts uses these dynamic updates


121
00:07:37,391 --> 00:07:41,228 line:-2
to keep the progress indicator updated
with your listening progress.


122
00:07:41,828 --> 00:07:45,432 line:-2
Let's now turn to another new template
in iOS 14,


123
00:07:46,366 --> 00:07:47,768 line:-1
the tab bar template.


124
00:07:48,302 --> 00:07:50,838 line:-1
This is a new type of container template.


125
00:07:50,904 --> 00:07:55,642 line:-2
It can display several of your app's
templates in a tab-bar-style interface


126
00:07:55,709 --> 00:07:58,445 line:-2
that's instantly familiar
to CarPlay users.


127
00:07:59,313 --> 00:08:01,215 line:0
So, let's make a tab bar template.


128
00:08:01,281 --> 00:08:04,218 line:0
We'll start by creating two tabs
for the tab bar:


129
00:08:04,284 --> 00:08:07,421 line:0
one of them a list template
and the other a grid template.


130
00:08:07,788 --> 00:08:11,124 line:0
Here's a list template
to show some of my favorite albums.


131
00:08:11,191 --> 00:08:15,729 line:0
In iOS 14, every CarPlay template
inherits some new properties


132
00:08:15,796 --> 00:08:19,499 line:0
to let you customize
how that template appears in the tab bar.


133
00:08:21,235 --> 00:08:23,136 line:0
You can set the tab's title,


134
00:08:23,203 --> 00:08:27,241 line:0
pick a system tab image,
or provide your own custom tab image,


135
00:08:27,307 --> 00:08:30,310 line:0
and indicate whether the tab
should show a badge.


136
00:08:32,078 --> 00:08:36,015 line:0
We can create a tab bar template
by providing an array of templates,


137
00:08:36,082 --> 00:08:39,686 line:0
and each template in the array
becomes a tab on the tab bar.


138
00:08:41,321 --> 00:08:44,658 line:0
We can also dynamically update
the tab bar template.


139
00:08:44,725 --> 00:08:48,562 line:0
We can add new tabs, remove tabs,
rearrange tabs,


140
00:08:48,629 --> 00:08:53,233 line:0
or in this example, we can show and hide
the badge on one or more tabs.


141
00:08:54,368 --> 00:08:58,105 line:-2
Let's turn now to some new additions
in the list template for audio apps.


142
00:08:58,839 --> 00:09:02,309 line:-2
Here, Apple Podcasts
is using the new tab bar template


143
00:09:02,376 --> 00:09:05,245 line:-1
plus some new list item customizations.


144
00:09:05,312 --> 00:09:10,517 line:-2
You'll find a host of new properties
available in CPListItem for audio apps,


145
00:09:10,584 --> 00:09:14,288 line:-2
like the playback progress indicator
and the Now Playing bouncing bars.


146
00:09:15,422 --> 00:09:21,495 line:-2
And here, in iOS 14, Apple Books is using
the new CPListImageRowItem,


147
00:09:21,562 --> 00:09:25,799 line:-2
which brings this stunning artwork grid
to your audiobooks in CarPlay.


148
00:09:26,600 --> 00:09:29,770 line:-2
The list image row item
is available for your apps too.


149
00:09:29,837 --> 00:09:34,007 line:-2
It's as easy as adding the list image
row item to your list template.


150
00:09:35,309 --> 00:09:37,678 line:0
So let's try out those new list items.


151
00:09:37,744 --> 00:09:40,080 line:0
Here, I'm creating an imageRowItem


152
00:09:40,147 --> 00:09:44,017 line:0
to show some recently played audiobooks
in a grid of artwork.


153
00:09:45,752 --> 00:09:47,754 line:0
And just like the other list items,


154
00:09:47,821 --> 00:09:50,190 line:0
the image row item has
a listItemHandler.


155
00:09:50,257 --> 00:09:54,127 line:0
It's called when the user selects
the title in the image row item.


156
00:09:54,194 --> 00:09:56,864 line:0
So, in this example,
I might push a new list template


157
00:09:56,930 --> 00:10:00,000 line:0
to show even more
of the user's recent audiobooks.


158
00:10:01,735 --> 00:10:06,073 line:0
And just like in the other list items,
make sure to call the completion handler


159
00:10:06,139 --> 00:10:08,942 line:0
after your app finishes
any asynchronous work.


160
00:10:11,578 --> 00:10:15,315 line:-2
Each artwork in the grid
is individually selectable,


161
00:10:15,382 --> 00:10:17,518 line:0
so in addition to that title handler,


162
00:10:17,584 --> 00:10:20,988 line:0
we'll also specify
a listImageRowHandler.


163
00:10:21,421 --> 00:10:24,391 line:0
In the image row handler,
we can take some action


164
00:10:24,458 --> 00:10:28,395 line:0
in response to the specific audiobooks
that the user selected.


165
00:10:28,462 --> 00:10:31,231 line:0
For example,
we might start playback of that book.


166
00:10:31,698 --> 00:10:35,903 line:-2
Let's turn now to the cornerstone
of your audio app in CarPlay...


167
00:10:37,271 --> 00:10:38,872 line:-1
the nowPlayingTemplate.


168
00:10:39,206 --> 00:10:42,876 line:-2
The Now Playing screen
is instantly familiar to CarPlay users,


169
00:10:42,943 --> 00:10:47,381 line:-2
and with templates, you have even more
control over its appearance and behavior.


170
00:10:48,415 --> 00:10:51,852 line:-2
Your app can optionally enable
the "Playing Next" button


171
00:10:51,919 --> 00:10:53,587 line:-1
and the "Album Artist" button.


172
00:10:54,087 --> 00:10:57,858 line:-2
You may also optionally provide
custom Now Playing buttons


173
00:10:57,925 --> 00:11:00,494 line:-2
across the bottom
of the Now Playing screen.


174
00:11:00,827 --> 00:11:04,097 line:-2
Your Now Playing buttons
can use your own custom images,


175
00:11:04,164 --> 00:11:07,601 line:-2
or you can choose
from several system-provided images


176
00:11:07,668 --> 00:11:10,637 line:-1
that cover many common playback actions.


177
00:11:10,704 --> 00:11:14,174 line:-2
The nowPlayingTemplate
is unique among templates,


178
00:11:14,241 --> 00:11:17,811 line:-2
and it has several special behaviors
that you should keep in mind.


179
00:11:18,312 --> 00:11:21,582 line:-2
First, the nowPlayingTemplate
is a shared instance.


180
00:11:21,915 --> 00:11:25,319 line:-2
There's only one instance
of this template in your app.


181
00:11:25,385 --> 00:11:28,322 line:-2
You should configure the properties
of that shared instance,


182
00:11:28,388 --> 00:11:32,659 line:-2
and, if you enable the optional
"Playing Next" and "Artist" buttons,


183
00:11:32,726 --> 00:11:36,296 line:-2
you should add at least one observer
for those button actions.


184
00:11:37,865 --> 00:11:42,069 line:-2
You should perform that initial Now
Playing configuration as soon as possible,


185
00:11:42,135 --> 00:11:45,239 line:-2
immediately after your app launches
in CarPlay.


186
00:11:45,305 --> 00:11:46,306 line:-1
Why?


187
00:11:46,840 --> 00:11:51,078 line:-2
Because the system may display
the nowPlayingTemplate on your behalf.


188
00:11:51,144 --> 00:11:55,516 line:-2
For example, when the user taps the Now
Playing button on the CarPlay home screen,


189
00:11:55,582 --> 00:11:57,251 line:-1
the system will launch your app


190
00:11:57,317 --> 00:12:00,320 line:-2
and immediately present
the shared nowPlayingTemplate.


191
00:12:02,389 --> 00:12:04,558 line:-1
When your app becomes the Now Playing app,


192
00:12:04,625 --> 00:12:07,294 line:-2
the system will also add
the Now Playing bar button


193
00:12:07,361 --> 00:12:10,030 line:-1
to your app's navigation bar or tab bar.


194
00:12:10,531 --> 00:12:12,199 line:-1
If the user taps that button,


195
00:12:12,266 --> 00:12:15,602 line:-2
the system will present
the same shared nowPlayingTemplate.


196
00:12:16,370 --> 00:12:18,972 line:-2
If a different app
becomes the Now Playing app,


197
00:12:19,039 --> 00:12:22,309 line:-2
the system will automatically remove
the Now Playing bar button


198
00:12:22,376 --> 00:12:25,345 line:-2
from your navigation bar or tab bar
in CarPlay.


199
00:12:27,481 --> 00:12:30,217 line:-2
Lastly,
only the list template may be pushed


200
00:12:30,284 --> 00:12:33,387 line:-2
on top of the nowPlayingTemplate
in the template stack.


201
00:12:33,453 --> 00:12:36,723 line:-2
For example, if your app enables
the "Playing Next" button


202
00:12:36,790 --> 00:12:39,760 line:-2
in the nowPlayingTemplate,
then pushing a new list template


203
00:12:39,826 --> 00:12:43,330 line:-2
is a great way to show your user
the upcoming playback queue.


204
00:12:44,298 --> 00:12:47,935 line:-2
So, let's revisit our template life cycle
example from earlier.


205
00:12:48,001 --> 00:12:51,772 line:-2
When your app is launched in CarPlay,
you'll always want to configure


206
00:12:51,839 --> 00:12:54,741 line:-2
the shared nowPlayingTemplate instance
immediately,


207
00:12:54,808 --> 00:12:58,478 line:-2
because the system may be launching
your app just to show Now Playing,


208
00:12:59,079 --> 00:13:01,415 line:-2
and when your app connects
to the CarPlay scene,


209
00:13:01,481 --> 00:13:04,685 line:-2
that's a great time to set up
the shared nowPlayingTemplate.


210
00:13:06,119 --> 00:13:09,890 line:-2
In this example,
I'm configuring a playback rate button


211
00:13:09,957 --> 00:13:12,860 line:-2
that will call a handler
when the user selects it.


212
00:13:14,795 --> 00:13:18,465 line:-2
This would also be an ideal place
to enable the "Playing Next" button


213
00:13:18,532 --> 00:13:21,335 line:-2
and add observers
for the nowPlayingTemplate buttons.


214
00:13:21,702 --> 00:13:23,737 line:-1
With that initial configuration done,


215
00:13:23,804 --> 00:13:27,808 line:-2
your app is ready for the system
to present Now Playing on your behalf,


216
00:13:27,875 --> 00:13:31,845 line:-2
and you can always update
the shared nowPlayingTemplate later.


217
00:13:32,446 --> 00:13:35,682 line:-2
That was a quick look
at some new CarPlay templates.


218
00:13:36,049 --> 00:13:38,151 line:-1
We saw the new tab bar template,


219
00:13:38,218 --> 00:13:41,822 line:-2
a foundational interface
for all kinds of apps in CarPlay,


220
00:13:42,322 --> 00:13:46,360 line:-2
plus the nowPlayingTemplate and other
list-item updates for audio apps.


221
00:13:46,927 --> 00:13:50,163 line:-2
Next up, my colleague, Allen,
will take us on a drive


222
00:13:50,230 --> 00:13:52,432 line:-2
through the other
new CarPlay app categories.


223
00:13:53,367 --> 00:13:54,768 line:-1
Thanks, Jonathan.


224
00:13:54,835 --> 00:13:57,437 line:-2
I'm Allen Langmaier
from iOS Car Experience.


225
00:13:57,838 --> 00:14:00,374 line:-2
Now that we've seen how improvements
to existing templates


226
00:14:00,440 --> 00:14:02,576 line:-1
will make current apps that much better,


227
00:14:02,643 --> 00:14:06,180 line:-2
I'd like to introduce a whole new set
of app categories for CarPlay.


228
00:14:07,347 --> 00:14:09,149 line:0
Starting in iOS 14,


229
00:14:09,216 --> 00:14:12,352 line:0
communication apps can take advantage
of the CarPlay framework


230
00:14:12,419 --> 00:14:15,389 line:0
to provide an experience
right on the car's display.


231
00:14:15,789 --> 00:14:17,157 line:-1
And for the first time,


232
00:14:17,224 --> 00:14:19,960 line:-2
EV charging, parking,
and quick food ordering


233
00:14:20,027 --> 00:14:23,797 line:-2
are brand new categories of apps
that can now be brought to CarPlay.


234
00:14:24,198 --> 00:14:26,967 line:-2
Communication apps are what were
previously known in CarPlay


235
00:14:27,034 --> 00:14:29,136 line:-1
as Messaging and VoIP calling apps


236
00:14:29,770 --> 00:14:33,073 line:-2
that traditionally worked
by leveraging SiriKit and CallKit.


237
00:14:33,507 --> 00:14:36,476 line:-2
Communication apps must continue
to use SiriKit and CallKit


238
00:14:36,543 --> 00:14:39,046 line:-1
to provide voice and telephony features.


239
00:14:39,112 --> 00:14:40,914 line:-1
But starting in iOS 14,


240
00:14:40,981 --> 00:14:43,417 line:-2
they can also take advantage
of the CarPlay framework


241
00:14:43,483 --> 00:14:48,255 line:-2
to show contacts, organize message lists
and display message status.


242
00:14:48,789 --> 00:14:50,824 line:-1
Here's an example of a communication app


243
00:14:50,891 --> 00:14:53,861 line:-2
that makes use of these new features
of the CarPlay framework.


244
00:14:55,095 --> 00:14:58,599 line:-2
This app uses the new tab bar template,
as we saw earlier,


245
00:14:58,665 --> 00:15:02,436 line:-2
to intuitively allow the user
to choose contacts and listen to messages.


246
00:15:03,370 --> 00:15:05,339 line:-1
A common feature of communication apps


247
00:15:05,405 --> 00:15:08,408 line:-2
is the ability to show
a list of message threads.


248
00:15:08,475 --> 00:15:10,277 line:-1
Starting in iOS 14,


249
00:15:10,344 --> 00:15:14,848 line:-2
we are introducing a new list item
subclass called CPMessageListItem


250
00:15:14,915 --> 00:15:16,884 line:-2
that includes
a number of useful properties


251
00:15:16,950 --> 00:15:19,386 line:-1
to help create a rich user experience.


252
00:15:20,354 --> 00:15:22,856 line:-1
For this type of list template item,


253
00:15:22,923 --> 00:15:25,726 line:-2
handlers are not called
when tapped by the user.


254
00:15:25,792 --> 00:15:28,662 line:-2
Instead,
Siri will be automatically invoked


255
00:15:28,729 --> 00:15:31,865 line:-2
using the parameters you specify
in the message list item,


256
00:15:32,266 --> 00:15:35,936 line:-2
and the user will continue
a message compose, read,


257
00:15:36,003 --> 00:15:37,838 line:-1
or reply flow through Siri.


258
00:15:39,439 --> 00:15:43,010 line:-2
On the leading side, you can choose
to display an unread indicator,


259
00:15:43,076 --> 00:15:45,612 line:-1
a pin, a star, or icon.


260
00:15:45,679 --> 00:15:49,283 line:-2
Use some or all of these options
to match the capabilities of your app.


261
00:15:51,051 --> 00:15:55,055 line:-2
And the trailing end can be configured
with a mute indicator, text


262
00:15:55,122 --> 00:15:56,523 line:-1
and an optional image.


263
00:15:57,457 --> 00:15:58,759 line:-1
And like other items,


264
00:15:58,825 --> 00:16:02,829 line:-2
CPMessageListItem
supports dynamic list updates,


265
00:16:02,896 --> 00:16:05,332 line:-2
allowing you to easily change elements
of a message


266
00:16:05,399 --> 00:16:07,501 line:-1
just by updating its properties.


267
00:16:07,568 --> 00:16:10,003 line:-2
Another important feature
for communication apps


268
00:16:10,070 --> 00:16:12,339 line:-2
is the ability
to show contact information.


269
00:16:12,973 --> 00:16:15,976 line:-2
The contact template
is a brand new template in iOS 14


270
00:16:16,043 --> 00:16:18,679 line:-2
that will bring your address book
to the foreground.


271
00:16:18,745 --> 00:16:22,716 line:-2
In this example, the app has set up
the contact template with an image,


272
00:16:22,783 --> 00:16:26,954 line:-2
descriptive text, a set of action buttons,
and navigation bar buttons.


273
00:16:28,222 --> 00:16:32,125 line:-2
Note the template supports up to
three lines of text and up to four buttons


274
00:16:32,192 --> 00:16:35,462 line:-2
that can individually be configured
with custom images and text.


275
00:16:36,063 --> 00:16:38,899 line:-2
With all these new features available
to communication apps,


276
00:16:38,966 --> 00:16:42,202 line:-2
we can't wait to see the experiences
you'll bring to the CarPlay screen.


277
00:16:42,269 --> 00:16:46,840 line:-2
Now let's look at new app categories
appearing for the first time in iOS 14:


278
00:16:47,508 --> 00:16:50,711 line:-2
EV charging, parking,
and quick food ordering.


279
00:16:50,777 --> 00:16:53,280 line:-2
These type of apps
have many things in common.


280
00:16:53,347 --> 00:16:55,749 line:-2
They're all intimately involved
with the driving experience,


281
00:16:55,816 --> 00:16:57,918 line:-1
as they help find destinations on a map.


282
00:16:58,852 --> 00:17:02,689 line:-2
Additionally, these apps make it possible
to check availability,


283
00:17:02,756 --> 00:17:05,759 line:-2
reserve chargers or parking,
and place orders.


284
00:17:06,593 --> 00:17:10,196 line:-2
We're excited to introduce
a set of new templates in iOS 14


285
00:17:10,263 --> 00:17:13,267 line:-2
that enable your apps
to provide these features in CarPlay.


286
00:17:14,601 --> 00:17:17,905 line:-2
Let's start by looking at an example
of a quick food ordering app.


287
00:17:18,638 --> 00:17:22,309 line:-2
The app has four tabs across the top
for nearby store locations,


288
00:17:22,376 --> 00:17:26,046 line:-2
previous purchases, favorites,
and order information.


289
00:17:26,847 --> 00:17:30,517 line:-2
Notice that the app is streamlined,
and everything is immediately actionable.


290
00:17:31,718 --> 00:17:36,123 line:-2
There is no detailed food menu,
account management, or other settings.


291
00:17:36,723 --> 00:17:40,727 line:-2
Focus your CarPlay experience
on providing easy, one-step access


292
00:17:40,794 --> 00:17:42,329 line:-1
to the most common tasks.


293
00:17:42,963 --> 00:17:45,599 line:-2
Whether you are looking for
a nearby drive-through,


294
00:17:45,666 --> 00:17:47,868 line:-2
a charging station
for your electric vehicle,


295
00:17:47,935 --> 00:17:49,736 line:-1
or a nearby parking garage,


296
00:17:49,803 --> 00:17:52,506 line:-1
your first task is to identify a location.


297
00:17:52,973 --> 00:17:56,143 line:-2
iOS 14 includes the brand new
point of interest template.


298
00:17:57,010 --> 00:17:59,713 line:-2
The point of interest template combines
an interactive map


299
00:17:59,780 --> 00:18:03,383 line:-2
provided by the MapKit framework
accompanied by an information panel.


300
00:18:04,451 --> 00:18:07,421 line:-2
Use it to show nearby locations
and let users pick one.


301
00:18:09,957 --> 00:18:13,961 line:-2
Your app supplies a list of locations
and optional images to show on the map.


302
00:18:14,761 --> 00:18:17,164 line:-2
The template provides
pan and zoom capabilities


303
00:18:17,231 --> 00:18:19,399 line:-2
and will notify you
of changing map regions.


304
00:18:20,634 --> 00:18:22,469 line:-1
To create a point of interest template,


305
00:18:22,536 --> 00:18:26,540 line:-2
start by constructing a list of up to 12
CPPointOfInterest instances.


306
00:18:27,774 --> 00:18:30,511 line:-2
Each of these includes a title,
an optional subtitle,


307
00:18:30,577 --> 00:18:33,847 line:-2
and an informative text that will
be shown on the information panel.


308
00:18:36,116 --> 00:18:40,354 line:-2
Remember to show only the most relevant
information to drivers in CarPlay.


309
00:18:40,420 --> 00:18:44,324 line:-2
On iPhone, your app might show
all possible locations,


310
00:18:44,391 --> 00:18:48,529 line:-2
but in CarPlay, you should limit the list
to those that are most relevant or nearby.


311
00:18:49,162 --> 00:18:52,533 line:-2
If multiple locations appear
close to each other on the map,


312
00:18:52,599 --> 00:18:54,568 line:-1
CarPlay will automatically group them.


313
00:18:56,103 --> 00:18:58,906 line:-2
The point of interest template supports
dynamic property updates


314
00:18:58,972 --> 00:19:00,574 line:-1
like other CarPlay templates.


315
00:19:01,508 --> 00:19:03,210 line:-1
Here, to indicate selection,


316
00:19:03,277 --> 00:19:07,047 line:-2
we have updated the pin image property
of a location to use a different color.


317
00:19:08,749 --> 00:19:11,251 line:-1
When a location is selected from a list,


318
00:19:11,318 --> 00:19:14,087 line:-2
you may choose to show a secondary card
for that point,


319
00:19:14,154 --> 00:19:17,191 line:-2
revealing additional information
and up to two buttons.


320
00:19:17,958 --> 00:19:20,694 line:-2
These buttons could be used
for a variety of tasks.


321
00:19:20,761 --> 00:19:22,496 line:-1
For instance, they may signal you


322
00:19:22,563 --> 00:19:25,599 line:-2
to switch to a navigation app
for driving directions


323
00:19:25,666 --> 00:19:29,736 line:-2
or push to another template to display
additional information for that location.


324
00:19:30,237 --> 00:19:32,439 line:-2
Let's take a look
at how to update the template


325
00:19:32,506 --> 00:19:36,376 line:-2
in response to either
user pan and zoom actions, or movement.


326
00:19:36,844 --> 00:19:40,180 line:-2
All three of these events will result
in the visible map region changing,


327
00:19:41,048 --> 00:19:44,151 line:-2
and your app should update the template
with a new list of locations


328
00:19:44,218 --> 00:19:45,786 line:-1
that correspond to that region.


329
00:19:46,220 --> 00:19:47,654 line:-1
Start by assigning the template


330
00:19:47,721 --> 00:19:50,891 line:-2
an object conforming to
CPPointOfInterestTemplateDelegate


331
00:19:51,291 --> 00:19:54,061 line:-2
so it can be notified each time
the map region changes.


332
00:19:56,263 --> 00:19:58,765 line:-2
Here we see the delegate method
being defined...


333
00:20:01,001 --> 00:20:03,070 line:-1
and new locations being computed...


334
00:20:04,137 --> 00:20:05,839 line:-1
and then passed to the template.


335
00:20:07,908 --> 00:20:11,578 line:-2
At this time, CarPlay will update
your locations list and map


336
00:20:11,645 --> 00:20:13,046 line:-1
with the new values.


337
00:20:15,816 --> 00:20:18,418 line:-2
Next,
let's take a closer look at how your app


338
00:20:18,485 --> 00:20:21,154 line:-2
may go about managing
all your relevant points of interest.


339
00:20:22,422 --> 00:20:26,193 line:-2
In the previous slide, we saw the need
to compute new locations for a region.


340
00:20:26,994 --> 00:20:29,429 line:-2
You may choose to query
your own locations database


341
00:20:29,496 --> 00:20:32,366 line:-2
or leverage MapKit's
to determine nearby destinations.


342
00:20:34,301 --> 00:20:37,871 line:-2
Then you'll need to construct a list
of CPPointOfInterest models,


343
00:20:37,938 --> 00:20:40,440 line:-2
initializing each with the data
from your lookup.


344
00:20:41,208 --> 00:20:43,477 line:-2
This is where you bring coordinate values,
titles,


345
00:20:43,544 --> 00:20:47,381 line:-2
and other available data from your app
and make them available to the template.


346
00:20:48,949 --> 00:20:52,186 line:-2
In this example, the app attempts
to reuse models whenever possible


347
00:20:52,252 --> 00:20:55,189 line:-2
as an optimization
and to reduce work for the template.


348
00:20:56,657 --> 00:20:57,925 line:-1
And it's just that easy.


349
00:20:57,991 --> 00:21:01,528 line:-2
By responding to map region changes
and keeping the template current,


350
00:21:01,595 --> 00:21:04,398 line:-2
you'll enable your users
to find nearby destinations.


351
00:21:05,599 --> 00:21:09,236 line:-2
And lastly, let's add one more bit
of functionality to your app.


352
00:21:10,304 --> 00:21:13,006 line:-1
Having just enabled location browsing,


353
00:21:13,073 --> 00:21:15,776 line:-2
your users will likely need
to pick one to proceed.


354
00:21:16,710 --> 00:21:20,380 line:-2
Making use of the optional button
properties of CPPointOfInterest


355
00:21:20,447 --> 00:21:23,383 line:-2
is a convenient approach
in making locations selectable.


356
00:21:24,785 --> 00:21:27,721 line:-2
Here we assign
a CPPointOfInterest instance


357
00:21:27,788 --> 00:21:30,624 line:-2
a primary button that will appear
on the information panel.


358
00:21:32,860 --> 00:21:36,296 line:-2
As you can see, a "Select" button
is now available for the location.


359
00:21:37,264 --> 00:21:40,701 line:-2
As noted earlier, the information panel
supports up to two buttons


360
00:21:40,767 --> 00:21:43,570 line:-2
and several lines of descriptive text
for each point.


361
00:21:44,738 --> 00:21:47,341 line:-2
The next step
is to assign the button a handler.


362
00:21:47,774 --> 00:21:50,344 line:-2
The button's handler
will be called when tapped,


363
00:21:50,410 --> 00:21:53,180 line:-2
and here we're maintaining
both selection state,


364
00:21:53,247 --> 00:21:55,849 line:-1
in addition to updating annotation images


365
00:21:56,350 --> 00:21:59,520 line:-2
to make it more clear
which location is selected on the map.


366
00:22:01,088 --> 00:22:03,524 line:-1
Again, any changes to template properties


367
00:22:03,590 --> 00:22:06,193 line:-2
will immediately translate
to car screen updates.


368
00:22:06,960 --> 00:22:10,163 line:-2
In this case, assigning
the selectedIndex of the location


369
00:22:10,230 --> 00:22:12,599 line:-1
will have the template show the new state.


370
00:22:12,666 --> 00:22:15,702 line:-2
And that completes our quick tour
of the point of interest template,


371
00:22:15,769 --> 00:22:17,905 line:-1
taking us from handling map region changes


372
00:22:18,405 --> 00:22:20,307 line:-1
to making locations selectable.


373
00:22:20,641 --> 00:22:24,077 line:-2
Now, once the user has chosen a location
or performed a task,


374
00:22:24,578 --> 00:22:28,415 line:-2
you may need to show a summary
or otherwise finalize the interaction.


375
00:22:29,316 --> 00:22:32,186 line:-1
The information template is new in iOS 14.


376
00:22:32,653 --> 00:22:35,589 line:-2
It brings everything together
in a one-stop shop


377
00:22:35,656 --> 00:22:38,292 line:-2
for displaying text
and receiving user responses.


378
00:22:39,193 --> 00:22:41,929 line:-2
The information template is created
with a list of labels


379
00:22:41,995 --> 00:22:44,531 line:-2
that may be configured
in either one or two columns


380
00:22:45,098 --> 00:22:46,667 line:-1
and a set of footer buttons.


381
00:22:47,067 --> 00:22:50,871 line:-2
The template can serve many purposes
where full-screen interaction is needed.


382
00:22:51,438 --> 00:22:53,173 line:-1
For quick food ordering apps,


383
00:22:53,240 --> 00:22:56,009 line:-2
the information template may be used
as an order summary,


384
00:22:56,076 --> 00:22:58,912 line:-1
as seen here, or even a confirmation page.


385
00:23:00,447 --> 00:23:03,584 line:-2
And for EV charging apps,
the information template


386
00:23:03,650 --> 00:23:06,820 line:-2
can be used to show important information
about a charging station.


387
00:23:07,754 --> 00:23:10,090 line:-2
That takes us to the end
of this quick overview


388
00:23:10,157 --> 00:23:12,659 line:-1
of some of the new templates in iOS 14.


389
00:23:13,427 --> 00:23:15,429 line:-2
The contact template takes
the address book


390
00:23:15,495 --> 00:23:17,698 line:-2
in your communication apps
to the foreground...


391
00:23:19,132 --> 00:23:22,836 line:-2
and the point of interest template is
making it possible to build EV charging,


392
00:23:22,903 --> 00:23:25,539 line:-2
parking,
and apps for quick-service restaurants...


393
00:23:26,974 --> 00:23:29,276 line:-2
while the information template
ties everything together


394
00:23:29,343 --> 00:23:31,845 line:-1
by providing the ability to display text


395
00:23:31,912 --> 00:23:34,248 line:-2
and receive user responses
on the car screen.


396
00:23:35,082 --> 00:23:39,019 line:-2
We're excited to see all the great apps
you'll come up with making use of them.


397
00:23:39,086 --> 00:23:42,022 line:-2
And now back to Jonathan
to wrap things up for us today.


398
00:23:42,089 --> 00:23:43,257 line:-1
Thanks, Allen.


399
00:23:43,323 --> 00:23:46,560 line:-2
Today, we took a scenic drive
through some new additions


400
00:23:46,627 --> 00:23:48,128 line:-1
to the CarPlay framework.


401
00:23:48,195 --> 00:23:50,130 line:-1
If you're working on a navigation app,


402
00:23:50,197 --> 00:23:54,268 line:-2
then you can use many of the new templates
and improvements we discussed today.


403
00:23:56,170 --> 00:23:58,172 line:-1
Your audio and communication apps


404
00:23:58,238 --> 00:24:02,242 line:-2
can now take advantage of new templates,
like the tab bar template,


405
00:24:02,309 --> 00:24:05,078 line:-2
plus some improvements
to existing templates,


406
00:24:05,145 --> 00:24:06,480 line:-1
like the list template.


407
00:24:06,980 --> 00:24:09,583 line:-2
We also introduced
brand new app categories


408
00:24:09,650 --> 00:24:12,119 line:-2
that are supported in CarPlay
for the first time.


409
00:24:13,053 --> 00:24:16,757 line:-2
We saw new templates
for EV charging and parking apps,


410
00:24:16,823 --> 00:24:18,692 line:-1
like the new point of interest template.


411
00:24:19,259 --> 00:24:22,963 line:-2
Apps whose primary function
is EV charging or parking


412
00:24:23,030 --> 00:24:25,832 line:-2
can now provide a great experience
in CarPlay.


413
00:24:27,034 --> 00:24:30,137 line:-2
And if your app serves
quick-service restaurants,


414
00:24:30,204 --> 00:24:32,172 line:-1
you can add CarPlay to your app


415
00:24:32,239 --> 00:24:36,143 line:-2
to allow users to easily choose
recent or favorite items


416
00:24:36,210 --> 00:24:38,645 line:-2
and order them for pickup
or drive-through.


417
00:24:38,712 --> 00:24:42,015 line:-2
Now, keep in mind
that the car is a special place.


418
00:24:42,382 --> 00:24:45,886 line:-2
If you have an app in one
of the categories we've discussed today,


419
00:24:45,953 --> 00:24:48,121 line:-2
then you'll need to apply
for an entitlement


420
00:24:48,188 --> 00:24:49,990 line:-1
to enable CarPlay for your app.


421
00:24:50,958 --> 00:24:53,527 line:-1
CarPlay apps must be single-category.


422
00:24:53,594 --> 00:24:57,164 line:-2
You will need to choose the category
that you are supporting with your app


423
00:24:57,231 --> 00:24:59,032 line:-1
and use a single entitlement.


424
00:25:00,934 --> 00:25:02,169 line:-1
The entitlement you choose


425
00:25:02,236 --> 00:25:05,639 line:-2
will determine which CarPlay templates
are available to your app.


426
00:25:06,406 --> 00:25:08,542 line:-2
And remember,
if you're building an audio app,


427
00:25:08,609 --> 00:25:12,045 line:-2
and you want to deploy to iOS 13
or earlier,


428
00:25:12,112 --> 00:25:16,149 line:-2
that playable content and audio templates
may coexist in your app.


429
00:25:17,417 --> 00:25:19,620 line:0
For much more
about CarPlay templates,


430
00:25:19,686 --> 00:25:22,689 line:0
check out the updated
CarPlay App Programming Guide


431
00:25:22,756 --> 00:25:25,459 line:0
on developer.apple.com/carplay.


432
00:25:26,126 --> 00:25:29,796 line:0
This is also where you can go
to request entitlements for your app.


433
00:25:30,497 --> 00:25:32,165 line:0
There's also much more detail here


434
00:25:32,232 --> 00:25:35,335 line:0
about which entitlements
may use which CarPlay templates.


435
00:25:36,203 --> 00:25:40,374 line:-2
If you're deploying an audio app
to iOS 13 or earlier,


436
00:25:40,440 --> 00:25:44,311 line:-2
you may want to revisit
the playable content documentation.


437
00:25:44,378 --> 00:25:46,647 line:-2
And if you're building
a communication app,


438
00:25:46,713 --> 00:25:49,349 line:-1
your app must implement SiriKit.


439
00:25:49,416 --> 00:25:52,553 line:-2
There's a wealth of documentation
and resources available


440
00:25:52,619 --> 00:25:54,321 line:-1
on the CarPlay developer site.


441
00:25:55,989 --> 00:25:58,325 line:-2
If you're working
on a navigation template app,


442
00:25:58,392 --> 00:26:01,361 line:-1
check out our session from WWDC 2018.


443
00:26:02,129 --> 00:26:04,131 line:-1
Thank you so much for joining us today.


444
00:26:04,198 --> 00:26:07,935 line:-2
We are so excited to accelerate your apps
onto the car screen


445
00:26:08,001 --> 00:26:10,637 line:-2
and to see what you build
with CarPlay templates.

