1
00:00:04,003 --> 00:00:06,306 line:-1
Hello and welcome to WWDC.


2
00:00:07,808 --> 00:00:12,246 line:0
Hi, everyone. I'm Udayan Kale.
I'm on the Game Center engineering team.


3
00:00:12,312 --> 00:00:15,282 line:0
In this session, we will be talking about
all the new features


4
00:00:15,349 --> 00:00:18,285 line:0
in Game Center Leaderboards, Achievements,
and Multiplayer.


5
00:00:19,086 --> 00:00:21,421 line:-2
So let's talk about
Game Center Leaderboards.


6
00:00:21,488 --> 00:00:24,091 line:-2
I will do a quick recap
of Game Center Leaderboards


7
00:00:24,157 --> 00:00:26,527 line:-2
and then show you
everything that's new this year.


8
00:00:27,661 --> 00:00:31,164 line:-2
Leaderboards have always been
an integral part of Game Center.


9
00:00:31,231 --> 00:00:35,335 line:-2
A leaderboard is driven by scores
and ranks players based on these scores.


10
00:00:35,936 --> 00:00:38,405 line:-2
Players can view
their friend and global ranks


11
00:00:38,472 --> 00:00:40,741 line:-2
and challenge other players
to beat their scores.


12
00:00:42,476 --> 00:00:45,012 line:-2
You can share leaderboards
across versions of your games


13
00:00:45,078 --> 00:00:47,347 line:-1
on iOS, tvOS and macOS.


14
00:00:48,015 --> 00:00:51,952 line:-2
Game Center provides a lot of choices
when it comes to configuring leaderboards


15
00:00:52,019 --> 00:00:55,422 line:-2
and setting the score formats,
scoring types and sort orders.


16
00:00:56,657 --> 00:01:00,761 line:-2
Game Center leaderboards have always been
the traditional non-expiring type.


17
00:01:01,328 --> 00:01:04,498 line:-2
They maintain
player scores and rankings forever.


18
00:01:04,565 --> 00:01:07,734 line:-2
We now refer to these leaderboards
as classic leaderboards.


19
00:01:07,801 --> 00:01:09,269 line:-1
Here are a few examples.


20
00:01:10,137 --> 00:01:12,472 line:-2
A game wants to keep track
of the overall total number


21
00:01:12,539 --> 00:01:16,910 line:-2
of experience points earned by players,
or the most coins that were collected,


22
00:01:16,977 --> 00:01:19,479 line:-2
or the shortest time taken
to complete a game level.


23
00:01:19,980 --> 00:01:22,683 line:-2
These are all good use cases
for classic leaderboards.


24
00:01:23,250 --> 00:01:24,585 line:-1
So what's new this year?


25
00:01:25,085 --> 00:01:28,689 line:-2
We now have a new type of leaderboard
called recurring leaderboards.


26
00:01:28,755 --> 00:01:31,558 line:-2
We have also completely redesigned
the in-game UI,


27
00:01:31,625 --> 00:01:35,762 line:-2
and we have a new set of APIs to access
leaderboard data and submit scores.


28
00:01:36,630 --> 00:01:39,499 line:-1
I will cover the new UI and APIs later.


29
00:01:39,566 --> 00:01:41,702 line:-2
For now,
let's look at recurring leaderboards.


30
00:01:42,269 --> 00:01:44,471 line:-2
Recurring leaderboards
are short-lived leaderboards


31
00:01:44,538 --> 00:01:46,573 line:-1
that repeat on a periodic basis.


32
00:01:46,940 --> 00:01:48,408 line:-1
These leaderboards will be great


33
00:01:48,475 --> 00:01:51,211 line:-2
if your game wants to support
periodic timed events.


34
00:01:51,278 --> 00:01:52,846 line:-1
Here are some good use cases.


35
00:01:53,247 --> 00:01:56,917 line:-2
You want your game to run
a 15-minute competition every hour,


36
00:01:56,984 --> 00:02:00,587 line:-2
or you want to host
a one-hour challenge every Sunday at noon,


37
00:02:00,654 --> 00:02:03,423 line:-2
or you just want to run
a new leaderboard each week.


38
00:02:03,490 --> 00:02:07,661 line:-2
Recurring leaderboards will give
your players a fresh start every time


39
00:02:07,728 --> 00:02:09,229 line:-1
to compete for top spots.


40
00:02:09,630 --> 00:02:13,166 line:-2
Here is a deeper look at how
Game Center recurring leaderboards work.


41
00:02:14,601 --> 00:02:18,038 line:-2
A recurring leaderboard is a sequence
of individual timed leaderboards


42
00:02:18,105 --> 00:02:20,641 line:-1
that start and end on a periodic basis.


43
00:02:21,375 --> 00:02:24,378 line:-2
We call each of these
individual leaderboards an occurrence.


44
00:02:24,845 --> 00:02:27,514 line:-2
These occurrences are short-lived
and do not overlap.


45
00:02:28,215 --> 00:02:31,251 line:-2
Each new occurrence begins
only after the current one ends.


46
00:02:32,319 --> 00:02:34,121 line:-1
You configure a recurring leaderboard


47
00:02:34,188 --> 00:02:36,490 line:-2
using a set of parameters
in App Store Connect.


48
00:02:37,257 --> 00:02:38,492 line:-1
Initial start date defines


49
00:02:38,559 --> 00:02:41,295 line:-2
when your leaderboard
will start creating occurrences.


50
00:02:41,361 --> 00:02:44,364 line:-2
Frequency specifies
the rate at which occurrences repeat,


51
00:02:45,098 --> 00:02:47,534 line:0
and Duration specifies
the time during which


52
00:02:47,601 --> 00:02:49,903 line:0
scores can be submitted
to an active occurrence.


53
00:02:51,004 --> 00:02:53,540 line:-2
You can introduce a time delay
between occurrences


54
00:02:53,607 --> 00:02:56,009 line:-2
using different values
for Frequency and Duration.


55
00:02:56,944 --> 00:02:58,912 line:-1
Each occurrence also maintains information


56
00:02:58,979 --> 00:03:01,048 line:-2
about the start date
of the next occurrence,


57
00:03:01,114 --> 00:03:03,450 line:-2
so you know exactly
when the next one begins.


58
00:03:03,984 --> 00:03:07,921 line:-2
You can access each occurrence through
an instance of the GKLeaderboard class.


59
00:03:09,323 --> 00:03:12,793 line:-2
So let me show you how to configure
the examples I mentioned earlier.


60
00:03:13,427 --> 00:03:16,930 line:-2
In the first example, you have
a 15-minute competition every hour


61
00:03:16,997 --> 00:03:18,599 line:-1
at the top of the hour.


62
00:03:18,665 --> 00:03:21,869 line:-2
You configure this leaderboard
with a desired initial start date,


63
00:03:21,935 --> 00:03:24,705 line:-2
a 60-minute frequency,
and a 15-minute duration.


64
00:03:26,240 --> 00:03:30,577 line:-2
The second example describes
a one-hour contest every Sunday at noon.


65
00:03:30,644 --> 00:03:33,146 line:-2
You set the start date,
a frequency of seven days,


66
00:03:33,213 --> 00:03:34,948 line:-1
and a duration of 60 minutes.


67
00:03:35,716 --> 00:03:39,152 line:-2
The third example shows
a recurring leaderboard that runs daily


68
00:03:39,219 --> 00:03:41,355 line:-1
with no gaps between occurrences.


69
00:03:41,421 --> 00:03:44,024 line:-2
And to ensure
that occurrences do not overlap,


70
00:03:44,091 --> 00:03:46,660 line:-2
the duration must not be greater
than the frequency.


71
00:03:47,261 --> 00:03:50,130 line:-2
Now that you know
how recurring leaderboards are configured,


72
00:03:50,197 --> 00:03:53,066 line:-2
let's talk about
incorporating leaderboards in your game.


73
00:03:53,634 --> 00:03:55,903 line:-2
The whole purpose
of adding leaderboards to your game


74
00:03:55,969 --> 00:03:58,105 line:-1
is to capture scores earned by players


75
00:03:58,172 --> 00:04:01,241 line:-2
and display these scores
so players can see their rankings.


76
00:04:01,842 --> 00:04:04,945 line:-2
I will now show you
how to submit scores to leaderboards.


77
00:04:06,580 --> 00:04:09,383 line:-2
Submitting scores
to a classic leaderboard is easy


78
00:04:09,449 --> 00:04:11,885 line:-1
because a classic leaderboard never ends.


79
00:04:11,952 --> 00:04:16,690 line:-2
You just call the submitScore method,
passing in a score, a context, player,


80
00:04:16,757 --> 00:04:18,591 line:-1
and one or more leaderboard IDs.


81
00:04:18,659 --> 00:04:21,962 line:-2
Context is an optional value
that you can associate with the score.


82
00:04:23,030 --> 00:04:26,733 line:-2
The leaderboard will retain either
the best score or the most recent score.


83
00:04:29,069 --> 00:04:30,237 line:-1
For recurring leaderboards,


84
00:04:30,304 --> 00:04:33,407 line:-2
scores can only be submitted
to the currently active occurrence.


85
00:04:33,473 --> 00:04:36,510 line:-2
You have two ways to submit scores
to a recurring leaderboard.


86
00:04:36,577 --> 00:04:39,847 line:-2
The first is to use the same method
we used for classic leaderboards.


87
00:04:40,480 --> 00:04:42,983 line:-2
The score will be posted
to the currently active occurrence


88
00:04:43,050 --> 00:04:45,118 line:-1
if one exists at the time of submission.


89
00:04:47,354 --> 00:04:50,657 line:-2
The second option is to use
a method on the GKLeaderboard instance


90
00:04:50,724 --> 00:04:52,492 line:-1
that corresponds to an occurrence.


91
00:04:53,093 --> 00:04:56,597 line:-2
As long as that occurrence is active,
score submissions will succeed.


92
00:04:57,531 --> 00:05:01,268 line:0
You can query the startDate
and duration properties of GKLeaderboard


93
00:05:01,335 --> 00:05:03,337 line:0
to determine if the occurrence is active.


94
00:05:04,905 --> 00:05:09,643 line:0
Game Center defers forwarding scores
to the server if the device is off-line.


95
00:05:09,710 --> 00:05:12,513 line:0
The server validates a score
based on the time it's received,


96
00:05:12,579 --> 00:05:14,715 line:0
not when it was earned by the player.


97
00:05:15,349 --> 00:05:18,452 line:0
So it is possible that an active
leaderboard occurrence may have expired


98
00:05:18,519 --> 00:05:20,220 line:0
when the score reaches the server.


99
00:05:21,955 --> 00:05:25,125 line:-2
Next, let's talk about
displaying leaderboards in your game.


100
00:05:25,192 --> 00:05:28,295 line:-2
You have two options when it comes to
showing leaderboards within your game:


101
00:05:29,296 --> 00:05:33,200 line:-2
using GameKit's new in-game UI
or displaying your own custom UI.


102
00:05:34,001 --> 00:05:36,737 line:-2
We strongly recommend
using GameKit's in-game UI,


103
00:05:36,803 --> 00:05:40,541 line:-2
as it's very easy to adopt and does
most of the heavy lifting for you.


104
00:05:41,041 --> 00:05:44,077 line:-2
For this, you will use
the GKGameCenterViewController class


105
00:05:44,144 --> 00:05:46,480 line:-1
that you may already be familiar with.


106
00:05:46,547 --> 00:05:50,284 line:-2
In the previous session, I showed you
how to invoke the Game Center Dashboard.


107
00:05:51,552 --> 00:05:55,656 line:-2
I'll now show you how to directly display
a list of leaderboards within your game.


108
00:05:56,156 --> 00:05:59,560 line:-2
You can see here I initialized
the GKGameCenterViewController


109
00:05:59,626 --> 00:06:01,395 line:-1
specifying the "leaderboards" state.


110
00:06:01,862 --> 00:06:05,299 line:-2
This gives you a list of leaderboards
that you see here on the right.


111
00:06:07,167 --> 00:06:10,170 line:-2
At this point, the user can navigate
to a particular leaderboard


112
00:06:10,237 --> 00:06:12,372 line:-1
that they are interested in and select it.


113
00:06:13,073 --> 00:06:15,475 line:-2
That will display the scores
for that leaderboard.


114
00:06:17,811 --> 00:06:21,348 line:-2
On the scores view, players can see
how they rank against friends,


115
00:06:21,415 --> 00:06:23,150 line:-1
recently played, and global players.


116
00:06:24,084 --> 00:06:26,053 line:-1
They can use the filter in the header area


117
00:06:26,119 --> 00:06:28,355 line:-2
to change the time scope
for classic leaderboards


118
00:06:28,422 --> 00:06:30,624 line:-2
or the occurrence
for recurring leaderboards.


119
00:06:31,225 --> 00:06:34,962 line:-2
They can scroll to the top of the list
by tapping on the name in the header.


120
00:06:37,731 --> 00:06:41,668 line:-2
You can even deep-link to a specific
leaderboard to directly display scores.


121
00:06:42,236 --> 00:06:46,473 line:-2
So here I have initialized GKGameCenter
ViewController with a leaderboard ID,


122
00:06:46,540 --> 00:06:48,342 line:-1
a player scope, and a time scope,


123
00:06:48,408 --> 00:06:51,411 line:-2
and you get the scores view
that you see on the right.


124
00:06:52,179 --> 00:06:55,616 line:-2
So you see, adopting Game Center's
in-game UI is that easy.


125
00:06:56,250 --> 00:06:58,218 line:-1
But if you want to draw your own UI,


126
00:06:58,285 --> 00:07:01,154 line:-2
you have to load the leaderboards
and scores programmatically.


127
00:07:01,955 --> 00:07:05,325 line:-2
We have introduced new APIs
to work with leaderboards and scores,


128
00:07:05,392 --> 00:07:08,061 line:-2
and you can read about them
in the developer docs.


129
00:07:09,496 --> 00:07:13,000 line:-2
Recurring leaderboards need special
handling when dealing with occurrences.


130
00:07:13,534 --> 00:07:16,837 line:-2
When you load a recurring leaderboard,
only the current occurrence is loaded.


131
00:07:17,371 --> 00:07:20,073 line:-2
You can use this current occurrence
to load a previous one


132
00:07:20,140 --> 00:07:23,277 line:-2
by calling the method
loadPreviousOccurrence, as shown here.


133
00:07:25,812 --> 00:07:29,983 line:-2
Here are some considerations to keep
in mind when loading previous occurrences.


134
00:07:30,317 --> 00:07:32,486 line:-2
Game Center keeps
expired occurrences around


135
00:07:32,553 --> 00:07:34,955 line:-1
for up to 30 days from their expiry.


136
00:07:35,022 --> 00:07:37,191 line:-2
However,
a signed-in player can view scores


137
00:07:37,257 --> 00:07:40,294 line:-2
only on the current occurrence
and one previous occurrence.


138
00:07:42,663 --> 00:07:45,966 line:-2
The previous occurrence is usually
the most recent expired occurrence


139
00:07:46,033 --> 00:07:48,435 line:-1
in which the player submitted a score.


140
00:07:48,502 --> 00:07:50,170 line:-1
In the example shown here,


141
00:07:50,237 --> 00:07:53,407 line:-2
Player 1 can view their scores
on the current occurrence, 53,


142
00:07:53,473 --> 00:07:55,275 line:-1
and the previous occurrence, 50.


143
00:07:57,511 --> 00:08:00,647 line:0
If a player never submitted a score
to an occurrence,


144
00:08:00,714 --> 00:08:02,649 line:0
or if that occurrence was purged,


145
00:08:02,716 --> 00:08:05,285 line:0
then the immediate previous occurrence
is accessible.


146
00:08:06,153 --> 00:08:10,123 line:0
So in the case of Player 2,
they can view occurrences 53 and 52.


147
00:08:11,191 --> 00:08:13,193 line:0
If no occurrence is currently active,


148
00:08:13,260 --> 00:08:17,030 line:0
the most recent occurrence is still
considered current for accessing scores.


149
00:08:17,865 --> 00:08:21,502 line:-2
Next, let's talk about setting up
the leaderboards in App Store Connect.


150
00:08:22,369 --> 00:08:26,173 line:-2
This screen shows the leaderboards
for a typical game in App Store Connect.


151
00:08:26,240 --> 00:08:30,978 line:-2
Most of the setup involving leaderboards,
sets, and groups is the same as before


152
00:08:31,044 --> 00:08:33,813 line:-2
and is common to both classic
and recurring leaderboards.


153
00:08:34,181 --> 00:08:36,250 line:-2
I will now show you
the additional configuration


154
00:08:36,316 --> 00:08:38,452 line:-1
you will need for recurring leaderboards.


155
00:08:40,453 --> 00:08:44,525 line:-2
To add a new leaderboard, just click
the "plus" icon next to the section title.


156
00:08:46,527 --> 00:08:50,397 line:-2
On the pop-up that shows, choose the type
of leaderboard you wish to create.


157
00:08:50,464 --> 00:08:52,499 line:-2
Your game can have
just classic leaderboards


158
00:08:52,566 --> 00:08:55,369 line:-2
or just recurring leaderboards
or a combination of both.


159
00:08:56,069 --> 00:08:59,373 line:-2
Once you select the type of leaderboard,
you'll need to configure it.


160
00:09:01,575 --> 00:09:05,879 line:-2
For classic and recurring leaderboards,
you must populate the section at the top.


161
00:09:05,946 --> 00:09:07,948 line:-1
This is the same as you do today.


162
00:09:10,083 --> 00:09:13,921 line:0
The section at the bottom is
only available for recurring leaderboards.


163
00:09:13,987 --> 00:09:16,023 line:0
The Start Date and Time specifies


164
00:09:16,089 --> 00:09:18,725 line:0
when your leaderboard
will start creating occurrences.


165
00:09:19,326 --> 00:09:21,595 line:0
The Duration is the time interval
during which


166
00:09:21,662 --> 00:09:23,697 line:0
scores can be submitted to an occurrence.


167
00:09:24,331 --> 00:09:28,635 line:0
And Restart specifies how frequently
new occurrences will be created.


168
00:09:31,371 --> 00:09:35,943 line:0
The Duration and Restart period are
both specified in minutes, hours or days.


169
00:09:36,476 --> 00:09:39,913 line:0
The restart period must be equal to
or larger than the duration


170
00:09:39,980 --> 00:09:41,615 line:0
so occurrences do not overlap.


171
00:09:43,050 --> 00:09:46,453 line:-2
Once you have configured a leaderboard,
you must localize it.


172
00:09:46,520 --> 00:09:49,156 line:-2
Both classic and recurring leaderboards
have the same options


173
00:09:49,223 --> 00:09:50,891 line:-1
when adding languages.


174
00:09:50,958 --> 00:09:53,694 line:-2
We strongly recommend that you upload
an image for your leaderboard


175
00:09:53,760 --> 00:09:55,796 line:-1
that reflects some aspect of your game.


176
00:09:56,430 --> 00:09:59,366 line:-2
This image is prominently displayed
in the in-game UI.


177
00:10:00,200 --> 00:10:03,003 line:-2
So that's it
for Game Center Leaderboards this year.


178
00:10:03,070 --> 00:10:07,007 line:-2
We cannot wait to see games adopting these
new features in various creative ways.


179
00:10:07,474 --> 00:10:10,844 line:-2
Next up is Achievements,
and for that, let me welcome Dersu.


180
00:10:10,911 --> 00:10:11,912 line:-1
Thank you.


181
00:10:14,848 --> 00:10:16,383 line:-1
Thank you, Udayan.


182
00:10:16,450 --> 00:10:19,086 line:-2
Let's talk about Achievements
in Game Center.


183
00:10:19,953 --> 00:10:21,522 line:-1
So, what is an achievement?


184
00:10:22,523 --> 00:10:25,025 line:-1
An achievement is a collectible item


185
00:10:25,092 --> 00:10:29,229 line:-2
indicating the player has successfully
reached a particular goal in your game.


186
00:10:30,464 --> 00:10:34,902 line:-2
Achievements have been a fundamental part
of Game Center since its inception,


187
00:10:34,968 --> 00:10:38,772 line:-2
as they provide players an additional way
of engaging with the game,


188
00:10:39,673 --> 00:10:41,241 line:-1
tracking gameplay progress,


189
00:10:41,909 --> 00:10:44,278 line:-1
and sharing that progress with friends.


190
00:10:44,678 --> 00:10:50,083 line:-2
Players will notice a fresh, new
and consistent look to achievement badges.


191
00:10:50,851 --> 00:10:52,052 line:-1
As the developer,


192
00:10:52,119 --> 00:10:55,355 line:-2
you define the achievements available
for players to work towards.


193
00:10:56,356 --> 00:10:59,526 line:-2
An achievement will appear to players
in one of four forms:


194
00:11:00,427 --> 00:11:06,166 line:-1
locked, in-progress, completed, or hidden.


195
00:11:07,301 --> 00:11:10,070 line:-2
Before the player has made any progress
toward an achievement,


196
00:11:10,137 --> 00:11:11,405 line:-1
it will appear locked.


197
00:11:12,472 --> 00:11:15,108 line:-2
Some players will often scan
the achievements list


198
00:11:15,175 --> 00:11:16,677 line:-1
and browse locked achievements


199
00:11:16,743 --> 00:11:19,246 line:-2
as a guide for what they should do
in your game.


200
00:11:19,780 --> 00:11:23,350 line:-2
In this sense, your achievements list
gives you an opportunity to tell users


201
00:11:23,417 --> 00:11:25,686 line:-2
what to think about
while playing your game.


202
00:11:26,687 --> 00:11:30,257 line:0
After you start reporting progress
for a user toward some achievement,


203
00:11:30,324 --> 00:11:32,559 line:0
it will display as in-progress.


204
00:11:34,161 --> 00:11:36,930 line:0
Once you report 100% progress
for that achievement,


205
00:11:36,997 --> 00:11:38,632 line:-1
it is considered complete.


206
00:11:39,533 --> 00:11:42,970 line:-2
At this point, the user will see
the image tied to the achievement,


207
00:11:43,036 --> 00:11:46,173 line:-2
and it will show up
in their list of completed achievements.


208
00:11:47,241 --> 00:11:50,777 line:0
Last, you can explicitly mark
an achievement as hidden


209
00:11:50,844 --> 00:11:52,679 line:0
until the player has completed it.


210
00:11:53,146 --> 00:11:56,683 line:-2
You might do this if you feel
the achievement description itself


211
00:11:56,750 --> 00:12:00,354 line:-2
prematurely reveals
aspects of the game's story or plot.


212
00:12:00,787 --> 00:12:04,825 line:-2
Alternatively, consider
using hidden achievements to surprise,


213
00:12:04,892 --> 00:12:07,227 line:-1
delight or humor the player.


214
00:12:07,661 --> 00:12:09,863 line:-2
For example,
you might include a hidden achievement


215
00:12:09,930 --> 00:12:12,566 line:-2
that rewards the player
for failing spectacularly.


216
00:12:13,267 --> 00:12:16,570 line:-2
This year, we're bringing Achievements
to more places,


217
00:12:16,637 --> 00:12:22,109 line:-2
including the Game Center Dashboard
on iOS, macOS, and tvOS.


218
00:12:23,577 --> 00:12:26,713 line:-2
The Dashboard is a brand-new area
for players to view


219
00:12:26,780 --> 00:12:29,183 line:-2
Game Center-related information
for your game.


220
00:12:30,884 --> 00:12:35,155 line:-2
It's accessible straight from your game,
and it showcases your game's achievements,


221
00:12:35,756 --> 00:12:38,192 line:-2
personalized
according to the player's progress.


222
00:12:39,059 --> 00:12:42,696 line:-2
This means
it's as important as ever to make sure


223
00:12:42,763 --> 00:12:48,869 line:-2
your achievements are engaging,
accessible, and interesting for players.


224
00:12:51,038 --> 00:12:54,241 line:0
For some useful tips and best practices
for building achievements,


225
00:12:54,675 --> 00:12:58,212 line:0
we recommend you check out this year's
session "Design for Game Center."


226
00:12:59,246 --> 00:13:01,448 line:-2
Before finalizing
your achievements design,


227
00:13:01,949 --> 00:13:03,383 line:-1
it's important to keep in mind


228
00:13:03,450 --> 00:13:06,353 line:-2
that there are limits
to how many you can include in your game.


229
00:13:06,854 --> 00:13:09,823 line:-2
Your game can have a maximum
of 100 achievements,


230
00:13:10,190 --> 00:13:12,726 line:-1
each of which can award up to 100 points.


231
00:13:13,493 --> 00:13:16,763 line:-2
And overall,
your game can award up to 1,000 points.


232
00:13:17,598 --> 00:13:20,067 line:-2
You'll want to make sure
you make the most of this budget,


233
00:13:20,133 --> 00:13:21,935 line:-2
creating a set of achievements
that require


234
00:13:22,002 --> 00:13:25,239 line:-2
a range of skills and dedication
to complete.


235
00:13:26,206 --> 00:13:28,175 line:-2
Finally,
you should keep these limits in mind


236
00:13:28,242 --> 00:13:30,377 line:-2
when shipping
the initial version of your game,


237
00:13:30,444 --> 00:13:33,380 line:-2
as you may want to create
new achievements for future updates.


238
00:13:34,181 --> 00:13:35,983 line:-1
After you've designed some achievements,


239
00:13:36,049 --> 00:13:38,919 line:-2
you're probably ready
to start integrating them into your game.


240
00:13:39,586 --> 00:13:42,089 line:-2
And there are three simple steps
needed to do this.


241
00:13:43,257 --> 00:13:46,026 line:-2
First, you'll need to authenticate
the local player.


242
00:13:47,060 --> 00:13:48,629 line:-1
Without first authenticating,


243
00:13:48,695 --> 00:13:52,165 line:-2
any API calls you make to GameKit
will result in an error.


244
00:13:53,667 --> 00:13:55,435 line:-1
For more on using the local player,


245
00:13:55,502 --> 00:14:00,674 line:-2
refer to session "Tap into Game Center:
Dashboard, Access Point, and Profile."


246
00:14:02,843 --> 00:14:05,746 line:-2
Next, you need to report
the player's progress to GameKit.


247
00:14:06,713 --> 00:14:10,284 line:-2
As long as GameKit maintains
a progress of zero for an achievement,


248
00:14:10,817 --> 00:14:13,420 line:-2
it's going to appear to the player
as locked.


249
00:14:14,054 --> 00:14:16,390 line:-2
But the most interesting part
of achievements happens


250
00:14:16,456 --> 00:14:18,525 line:-2
when the player makes progress
in your game.


251
00:14:19,359 --> 00:14:23,063 line:-2
You'll notice in-progress achievements
have been completely redesigned.


252
00:14:24,298 --> 00:14:27,267 line:-2
Game Center will present players
with this brand-new styling,


253
00:14:27,734 --> 00:14:32,172 line:-2
which features a progress circle,
enticing them to get back into your game.


254
00:14:34,308 --> 00:14:37,077 line:-2
Unsurprisingly,
reporting achievement progress


255
00:14:37,144 --> 00:14:39,646 line:-1
is done through the GKAchievement class.


256
00:14:40,647 --> 00:14:42,749 line:-1
Every achievement has a unique identifier,


257
00:14:43,217 --> 00:14:45,552 line:-2
which you use
to initialize the GKAchievement.


258
00:14:47,554 --> 00:14:50,324 line:-2
Anytime the player makes progress
towards that achievement,


259
00:14:50,824 --> 00:14:53,861 line:-2
it's important to update
that percentComplete property.


260
00:14:55,762 --> 00:14:58,365 line:-1
Finally, you can call the report method


261
00:14:58,432 --> 00:15:01,602 line:-2
to register that change
and handle any potential errors.


262
00:15:03,570 --> 00:15:06,473 line:-2
Now the player will see
their achievement progress update


263
00:15:06,807 --> 00:15:08,475 line:-1
anywhere they see this achievement,


264
00:15:08,909 --> 00:15:11,945 line:-2
and they will unlock its imagery
if it's completed.


265
00:15:13,547 --> 00:15:17,351 line:-2
Finally, let's talk about how
we can show the player their achievements.


266
00:15:18,452 --> 00:15:22,656 line:-2
Achievements have a brand-new home
in the Game Center In-Game Dashboard.


267
00:15:23,991 --> 00:15:25,859 line:-1
If you integrate the new Access Point,


268
00:15:26,326 --> 00:15:29,596 line:-2
this dashboard is just one tap away
for the player in your game.


269
00:15:31,298 --> 00:15:33,800 line:-1
The Achievements tab is front and center,


270
00:15:33,867 --> 00:15:37,804 line:-2
giving players a one-stop shop
for viewing all things achievements.


271
00:15:40,207 --> 00:15:42,809 line:-2
Inside this tab,
the summaries give the player


272
00:15:42,876 --> 00:15:45,646 line:-2
a high-level view
of how they're doing in your game.


273
00:15:47,347 --> 00:15:48,815 line:-1
But players can dive deeper,


274
00:15:49,416 --> 00:15:52,019 line:-2
scanning through the achievements
they've already collected


275
00:15:52,352 --> 00:15:54,821 line:-2
as well as previewing
the ones they're working on


276
00:15:54,888 --> 00:15:57,157 line:-2
and some others
you've got in store for them.


277
00:15:58,258 --> 00:16:00,694 line:-2
While the player can reach
this page from the Dashboard,


278
00:16:01,261 --> 00:16:04,198 line:-1
you can also present it directly with API.


279
00:16:05,632 --> 00:16:09,503 line:-2
Doing so is done using
the GKGameCenterViewController.


280
00:16:10,871 --> 00:16:13,373 line:-2
You can initialize it
with an "achievements" state


281
00:16:13,874 --> 00:16:17,811 line:-2
and optionally assign the gameCenter
Delegate property on the view controller.


282
00:16:18,979 --> 00:16:21,014 line:-1
With just these few lines of code,


283
00:16:21,081 --> 00:16:24,618 line:-2
you'll guide players into the all-new
achievements page for your game.


284
00:16:26,053 --> 00:16:30,724 line:-2
This UI provides a clean and consistent
window into your game's achievements,


285
00:16:31,425 --> 00:16:34,795 line:-2
so it will be the preferred experience
for the vast majority of games.


286
00:16:35,929 --> 00:16:39,399 line:-2
For those that need to customize their
achievements' display in their own UI,


287
00:16:39,700 --> 00:16:42,970 line:-2
this can be done using
the GKAchievementDescription class.


288
00:16:44,738 --> 00:16:48,408 line:-2
Like GKAchievement, which is what
you use to update the player's progress,


289
00:16:49,042 --> 00:16:50,644 line:-1
this class has an identifier.


290
00:16:52,179 --> 00:16:56,350 line:-2
But it also has the "achievements" title,
as well as separate descriptions


291
00:16:56,416 --> 00:16:59,553 line:-2
for when the achievement
is unachieved and achieved.


292
00:17:01,889 --> 00:17:06,026 line:-2
It's important to note that the title and
descriptions associated with this class


293
00:17:06,093 --> 00:17:09,896 line:-2
are localized according to
the player's localization preferences.


294
00:17:11,198 --> 00:17:13,300 line:-1
As the game developer, you will make sure


295
00:17:13,367 --> 00:17:15,801 line:-2
that all the relevant
translations are included


296
00:17:15,868 --> 00:17:18,305 line:-2
when you set up an achievement
in App Store Connect.


297
00:17:18,672 --> 00:17:21,508 line:-2
But when interacting
with the achievement descriptions,


298
00:17:21,575 --> 00:17:24,978 line:-2
GameKit will give you strings
that are ready to display to the player.


299
00:17:26,413 --> 00:17:30,217 line:0
And finally, there are also APIs
for accessing achievement images


300
00:17:30,584 --> 00:17:32,819 line:0
for the achieved and non-achieved cases.


301
00:17:35,189 --> 00:17:39,193 line:-2
So we've talked a bit about how to design
achievements that work well for your game.


302
00:17:40,060 --> 00:17:44,364 line:-2
We've also shown how to work with GameKit
to view and update players' progress.


303
00:17:45,632 --> 00:17:48,569 line:-2
But before you can submit
an achievements-ready build of your game


304
00:17:48,635 --> 00:17:49,770 line:-1
to the App Store,


305
00:17:49,837 --> 00:17:52,873 line:-2
you'll need to configure the achievements
in App Store Connect.


306
00:17:54,575 --> 00:17:58,879 line:-2
To do so, go to the Features tab
of your game's page on App Store Connect.


307
00:17:59,880 --> 00:18:02,349 line:-2
Then,
after selecting the Game Center section,


308
00:18:02,950 --> 00:18:04,685 line:-1
you'll see an Achievements section.


309
00:18:06,286 --> 00:18:09,423 line:-2
To add an achievement for your game,
you can click the "plus" button.


310
00:18:10,624 --> 00:18:12,826 line:-2
This will bring up
the Add Achievement screen.


311
00:18:13,727 --> 00:18:16,964 line:-2
The achievement ID must be unique
to this achievement,


312
00:18:17,364 --> 00:18:19,900 line:-2
and,
as you saw in the previous code sample,


313
00:18:20,267 --> 00:18:23,003 line:-2
is used to initialize
your GKAchievement object.


314
00:18:25,339 --> 00:18:27,341 line:-2
You'll also have to configure
a few attributes,


315
00:18:27,407 --> 00:18:30,878 line:-2
such as point value,
whether it's hidden until achieved,


316
00:18:31,478 --> 00:18:34,314 line:-2
and whether the player
can earn the achievement multiple times.


317
00:18:35,682 --> 00:18:37,217 line:-1
These values will be reflected


318
00:18:37,284 --> 00:18:40,387 line:-2
in the GKAchievement class
we discussed earlier in the session.


319
00:18:41,522 --> 00:18:43,390 line:-1
We can finish adding this achievement,


320
00:18:43,457 --> 00:18:47,494 line:-2
and after we're done,
our build is ready to deliver to users.


321
00:18:48,428 --> 00:18:52,299 line:-2
Now I'm going to hand it over to Christy
to talk about multiplayer gaming.


322
00:18:59,006 --> 00:19:00,007 line:-1
Thank you, Dersu.


323
00:19:00,440 --> 00:19:03,310 line:-2
I am back to talk about
multiplayer gaming using Game Center.


324
00:19:03,810 --> 00:19:06,313 line:-2
First, I will give a quick overview
of Multiplayer.


325
00:19:07,080 --> 00:19:09,716 line:-1
Then I will show our new streamlined UI.


326
00:19:10,684 --> 00:19:14,321 line:-2
Next, I will give a quick review
of our basic API flows


327
00:19:14,388 --> 00:19:17,224 line:-2
and introduce some new options
for the Matchmaking UI.


328
00:19:17,925 --> 00:19:21,795 line:-2
Finally, I will talk about some changes
to privacy and restrictions.


329
00:19:22,996 --> 00:19:25,699 line:-2
We support several types
of multiplayer games:


330
00:19:26,333 --> 00:19:29,236 line:-1
real-time, turn-based and server-hosted.


331
00:19:30,037 --> 00:19:31,638 line:-1
The basic idea of our APIs


332
00:19:31,705 --> 00:19:35,108 line:-2
is that we take care of as much
of the multiplayer as we can for you.


333
00:19:36,009 --> 00:19:38,679 line:-2
For real-time,
we take care of finding players,


334
00:19:38,745 --> 00:19:40,581 line:-1
connecting to them, and sending data.


335
00:19:41,081 --> 00:19:44,852 line:-2
For turn-based, we take care of
turn management and storing the data.


336
00:19:45,485 --> 00:19:46,787 line:-1
For server-hosted,


337
00:19:46,854 --> 00:19:50,090 line:-2
we deliver you a list of players
that you can share with your server.


338
00:19:50,691 --> 00:19:52,960 line:-2
We have various ways
to find people to play with.


339
00:19:53,360 --> 00:19:56,196 line:-2
Firstly,
we have a really robust auto-match system


340
00:19:56,263 --> 00:19:59,266 line:-2
where we can find players
and get you into the game fast.


341
00:20:00,033 --> 00:20:02,302 line:-1
All you have to do is hit "Start Game."


342
00:20:03,270 --> 00:20:05,572 line:-1
You can also invite other players.


343
00:20:05,639 --> 00:20:09,009 line:-2
We have made it super easy to interact
with people you have made friends with.


344
00:20:09,343 --> 00:20:12,079 line:-2
We also make it fast
to find someone you just played with


345
00:20:12,145 --> 00:20:15,282 line:-2
so you can play with them again,
even in a different game.


346
00:20:16,250 --> 00:20:18,218 line:-2
We want you to play
with whomever you want,


347
00:20:18,285 --> 00:20:20,287 line:-1
so you can invite from your contacts.


348
00:20:20,587 --> 00:20:23,724 line:-2
This is great for developers
to bring new players into the game.


349
00:20:24,691 --> 00:20:27,194 line:-1
And finally, we work cross-platform,


350
00:20:27,528 --> 00:20:30,931 line:-2
so your players can play multiplayer
on whatever platform they like.


351
00:20:33,467 --> 00:20:36,036 line:-2
As you've just seen,
there's a new streamlined UI.


352
00:20:36,436 --> 00:20:39,139 line:-2
This is designed to help your users
find other players quickly


353
00:20:39,206 --> 00:20:41,041 line:-1
and get into the game faster.


354
00:20:41,408 --> 00:20:45,445 line:-2
We did this by simplifying the flow
and providing improved player suggestions.


355
00:20:45,812 --> 00:20:48,248 line:-2
But why talk about it
when we can show you?


356
00:20:50,050 --> 00:20:54,521 line:-2
Here we tap on the multiplayer button
and it brings up our matchmaking UI.


357
00:20:55,656 --> 00:20:57,524 line:-1
Now we tap "Add Player"...


358
00:21:00,160 --> 00:21:02,362 line:-1
and we'll invite our friend JonB.


359
00:21:03,497 --> 00:21:04,498 line:-1
Next...


360
00:21:05,899 --> 00:21:10,604 line:-2
we'll click on the "plus" button
to bring up contacts and invite Vance.


361
00:21:12,239 --> 00:21:14,741 line:-1
Now we tap "Invite and Start Game"...


362
00:21:16,476 --> 00:21:18,412 line:-1
and the last player will be auto-match.


363
00:21:19,213 --> 00:21:22,716 line:-2
So that's how you set up
a multiplayer game using our new flow.


364
00:21:23,317 --> 00:21:26,286 line:-2
What does matchmaking look like
from a coding perspective?


365
00:21:26,887 --> 00:21:30,157 line:-2
Let's take a look at the elements
of a real-time multiplayer match.


366
00:21:30,624 --> 00:21:32,593 line:-1
Starting from MyGameController,


367
00:21:33,327 --> 00:21:36,630 line:-2
first I authenticate the player,
create a match request,


368
00:21:37,064 --> 00:21:39,633 line:-2
and this is where I set
the number of players in a match,


369
00:21:39,700 --> 00:21:41,768 line:-1
and I can define people to invite.


370
00:21:42,603 --> 00:21:43,871 line:-1
it could be a friend,


371
00:21:43,937 --> 00:21:47,307 line:-2
another person I recently played with,
or someone discovered nearby.


372
00:21:48,208 --> 00:21:51,078 line:-2
And if appropriate,
I can use player groups and attributes


373
00:21:51,144 --> 00:21:54,781 line:-2
to filter the match request
to a specific game mode or other criteria.


374
00:21:55,649 --> 00:21:59,520 line:-2
Now I have a choice: either to
use this request for auto-matching


375
00:21:59,953 --> 00:22:03,724 line:-2
or to present a UI for the player
to select other people to invite.


376
00:22:05,125 --> 00:22:06,927 line:-1
So, let's say I'm doing auto-matching.


377
00:22:07,394 --> 00:22:09,663 line:-2
Then I'd simply use
the shared GKMatchmaker


378
00:22:09,730 --> 00:22:11,565 line:-1
and provide it with my match request.


379
00:22:12,299 --> 00:22:14,101 line:-1
Game Center will find other players.


380
00:22:14,735 --> 00:22:16,403 line:-1
It's time to play,


381
00:22:16,470 --> 00:22:20,040 line:-2
and you'll use the returned match object
to send data from player to player.


382
00:22:21,108 --> 00:22:24,811 line:-2
Or, as I said, I could choose to present
a GKMatchmakerViewController,


383
00:22:25,312 --> 00:22:27,080 line:-1
given the match request parameters,


384
00:22:27,147 --> 00:22:29,850 line:-2
and let the player select
their own people to invite.


385
00:22:31,285 --> 00:22:33,353 line:-1
Once they've accepted, the game can begin.


386
00:22:34,721 --> 00:22:37,090 line:-1
One more piece, very important,


387
00:22:37,591 --> 00:22:39,860 line:-2
which typically should be done
right at app launch,


388
00:22:39,927 --> 00:22:43,063 line:-2
is to adopt
the GKInviteEventListener protocol...


389
00:22:44,164 --> 00:22:45,799 line:-1
register it with the local player


390
00:22:45,866 --> 00:22:48,936 line:-2
in order to listen for invites
coming from other people,


391
00:22:49,002 --> 00:22:51,104 line:-2
and now
everything is ready to get started.


392
00:22:52,773 --> 00:22:55,509 line:-2
Turn-based matchmaking
follows virtually the same flow.


393
00:22:56,076 --> 00:22:59,379 line:-2
Like in this case,
you adopt a GKTurnBasedEventListener


394
00:22:59,947 --> 00:23:02,049 line:-1
with a couple more methods to implement it


395
00:23:02,115 --> 00:23:04,818 line:-2
and, like before,
register it with the local player.


396
00:23:06,720 --> 00:23:09,723 line:-2
Then you set up a match request
and call findMatchForRequest


397
00:23:09,790 --> 00:23:12,759 line:-2
on the GKTurnBasedMatch
for programmatic matchmaking.


398
00:23:13,293 --> 00:23:16,697 line:-2
Or you present a
GKTurnBasedMatchmakerViewController.


399
00:23:17,731 --> 00:23:21,201 line:-2
Either way,
an important difference with turn-based


400
00:23:21,502 --> 00:23:23,937 line:-2
is that you do not wait
for other players to match,


401
00:23:24,004 --> 00:23:27,774 line:-2
but instead start playing immediately
because it'll always be your turn.


402
00:23:29,910 --> 00:23:34,014 line:-2
For iOS 14, we have new options
to configure the matchmaking UI.


403
00:23:34,715 --> 00:23:36,683 line:-1
You can set "auto-match only"


404
00:23:36,750 --> 00:23:39,186 line:-2
if you want players to match up
with random other players


405
00:23:39,253 --> 00:23:41,188 line:-1
and get quickly into the game.


406
00:23:41,255 --> 00:23:45,025 line:-2
You can choose "nearby only"
for games like ARKit games,


407
00:23:45,592 --> 00:23:48,662 line:-2
where you wish to have players
that are in the same room with you.


408
00:23:49,162 --> 00:23:52,132 line:-2
There is a new restriction this year
that when enabled restricts both


409
00:23:52,199 --> 00:23:55,602 line:-2
the custom message in multiplayer invites
as well as voice chat.


410
00:23:56,370 --> 00:23:59,473 line:0
Here is a new flag,
personalizedCommunicationRestricted,


411
00:23:59,540 --> 00:24:04,545 line:0
that lets the app know this so they can,
for example, turn off their voice chat UI.


412
00:24:05,312 --> 00:24:08,315 line:-2
So if your app shows
a little microphone for voice chat,


413
00:24:08,382 --> 00:24:12,519 line:-2
and if this flag comes back true, then
disable the icon for this functionality.


414
00:24:13,453 --> 00:24:16,823 line:-2
In closing, I've talked about
the different types of multiplayer,


415
00:24:17,124 --> 00:24:20,394 line:-2
ways to find players,
and gave you a glimpse of the new UI.


416
00:24:21,028 --> 00:24:23,063 line:-1
Then I did a quick API review


417
00:24:23,130 --> 00:24:26,667 line:-2
and introduced you to new UI options
for our matchmaker view controller.


418
00:24:26,733 --> 00:24:29,236 line:-2
And finally,
I discussed a new privacy restriction.


419
00:24:29,803 --> 00:24:32,039 line:-1
So that's our session on Game Center.


420
00:24:32,105 --> 00:24:35,142 line:-2
Here we've covered leaderboards,
achievements, and multiplayer.


421
00:24:35,576 --> 00:24:38,645 line:0
Here are some resources
to check out for more depth.


422
00:24:39,012 --> 00:24:41,648 line:-2
You can also see our design talk
for more information.


423
00:24:42,349 --> 00:24:45,118 line:-1
So thank you, and have a great WWDC.

