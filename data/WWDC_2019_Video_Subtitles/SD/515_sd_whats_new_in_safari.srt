1
00:00:01,176 --> 00:00:04,500
[ Music ]


2
00:00:09,516 --> 00:00:13,286
[ Applause ]


3
00:00:13,786 --> 00:00:15,956
>> Hello. My name is Jessie


4
00:00:15,956 --> 00:00:17,436
Berlin, and I'm here to talk


5
00:00:17,436 --> 00:00:18,726
about what's new in Safari.


6
00:00:20,296 --> 00:00:21,476
We have three topics to cover


7
00:00:21,476 --> 00:00:24,556
today, and the most exciting one


8
00:00:24,766 --> 00:00:26,046
is desktop-class browsing on


9
00:00:27,136 --> 00:00:27,266
iPad.


10
00:00:28,356 --> 00:00:31,166
In iOS 13, we've made a set of


11
00:00:31,166 --> 00:00:33,166
fundamental changes to allow


12
00:00:33,166 --> 00:00:35,076
iPad to browse desktop websites,


13
00:00:35,766 --> 00:00:38,626
and you'll notice here that I'm


14
00:00:38,626 --> 00:00:39,826
showing Safari View Controller.


15
00:00:40,346 --> 00:00:41,636
It also gets these desktop


16
00:00:41,636 --> 00:00:43,066
websites right out of the box.


17
00:00:43,736 --> 00:00:46,466
If you have a custom in-app web


18
00:00:46,466 --> 00:00:48,636
browser, or even just an app


19
00:00:48,636 --> 00:00:50,186
that uses WKWebView, you're


20
00:00:50,186 --> 00:00:51,276
going to want to check out the


21
00:00:51,276 --> 00:00:53,006
talk from earlier this week for


22
00:00:53,006 --> 00:00:54,276
detailed guidance and best


23
00:00:54,276 --> 00:00:54,826
practices.


24
00:00:55,526 --> 00:00:57,946
So if you haven't already, go


25
00:00:57,946 --> 00:01:00,246
check it out.


26
00:01:00,516 --> 00:01:02,486
Next up, improvements to Safari


27
00:01:02,486 --> 00:01:03,006
extensions.


28
00:01:04,075 --> 00:01:05,385
We'll start with a refresher on


29
00:01:05,556 --> 00:01:06,736
the four different types of


30
00:01:06,736 --> 00:01:07,736
Safari extensions.


31
00:01:08,346 --> 00:01:12,766
First, there are Legacy Safari


32
00:01:12,766 --> 00:01:14,506
extensions from macOS.


33
00:01:15,566 --> 00:01:17,396
They were introduced in 2010


34
00:01:17,396 --> 00:01:19,326
with Mac OS X Snow Leopard, and


35
00:01:19,326 --> 00:01:21,896
deprecated last year.


36
00:01:22,096 --> 00:01:23,506
Next, content blockers.


37
00:01:24,256 --> 00:01:25,836
These are available for both iOS


38
00:01:25,836 --> 00:01:27,586
and macOS, and they're designed


39
00:01:27,586 --> 00:01:29,356
for speed and user privacy.


40
00:01:30,576 --> 00:01:32,456
Third, share extensions.


41
00:01:32,976 --> 00:01:34,146
These are also available on both


42
00:01:34,146 --> 00:01:35,076
iOS and macOS.


43
00:01:36,156 --> 00:01:37,336
Once invoked by the user,


44
00:01:37,696 --> 00:01:38,836
they're able to run JavaScript


45
00:01:38,836 --> 00:01:40,596
on the webpage, and return data


46
00:01:40,596 --> 00:01:41,756
to your app extension.


47
00:01:42,376 --> 00:01:45,166
And finally, Safari app


48
00:01:45,166 --> 00:01:46,976
extensions, available on macOS.


49
00:01:48,276 --> 00:01:49,786
These run on web pages without


50
00:01:49,936 --> 00:01:51,306
user action and can be


51
00:01:51,306 --> 00:01:52,466
restricted to run on a single


52
00:01:52,466 --> 00:01:53,866
website or run everywhere.


53
00:01:54,526 --> 00:01:58,156
Now that content blockers, share


54
00:01:58,156 --> 00:01:59,496
extensions, and Safari app


55
00:01:59,496 --> 00:02:01,136
extensions provide great


56
00:02:01,136 --> 00:02:02,686
extensibility options without


57
00:02:02,686 --> 00:02:05,086
the performance and privacy


58
00:02:05,086 --> 00:02:06,416
problems of Legacy Safari


59
00:02:06,416 --> 00:02:09,086
extensions, we are dropping


60
00:02:09,086 --> 00:02:10,346
support for Legacy Safari


61
00:02:10,346 --> 00:02:11,896
extensions in Safari 13.


62
00:02:12,456 --> 00:02:15,356
Safari will no longer load them.


63
00:02:16,196 --> 00:02:17,626
Today, we're going to be


64
00:02:17,626 --> 00:02:19,026
primarily focusing on


65
00:02:19,026 --> 00:02:20,596
improvements to content blockers


66
00:02:20,596 --> 00:02:21,706
and Safari app extensions on


67
00:02:21,706 --> 00:02:21,956
macOS.


68
00:02:24,916 --> 00:02:26,436
These Safari extensions come


69
00:02:26,436 --> 00:02:27,706
bundled with Mac apps built in


70
00:02:27,706 --> 00:02:29,386
Xcode, which gives you the


71
00:02:29,386 --> 00:02:30,836
ability to take advantage of


72
00:02:30,886 --> 00:02:32,316
powerful native APIs and


73
00:02:32,316 --> 00:02:34,236
frameworks, as well as HTML,


74
00:02:34,356 --> 00:02:37,886
JavaScript, and CSS.


75
00:02:38,396 --> 00:02:39,896
And when you install an app with


76
00:02:39,896 --> 00:02:41,126
a Safari app extension from the


77
00:02:41,126 --> 00:02:43,596
Mac App Store, your extensions


78
00:02:43,596 --> 00:02:44,896
show up immediately in Safari's


79
00:02:44,896 --> 00:02:46,266
preferences, ready for your


80
00:02:46,266 --> 00:02:48,946
users to turn on.


81
00:02:48,946 --> 00:02:50,716
However, you can also distribute


82
00:02:50,716 --> 00:02:52,086
your app directly from your


83
00:02:52,086 --> 00:02:53,306
website after running it through


84
00:02:53,306 --> 00:02:54,326
the notarization service.


85
00:02:55,536 --> 00:02:56,816
Notarized apps need to be


86
00:02:56,816 --> 00:02:58,556
launched at least once for their


87
00:02:58,556 --> 00:02:59,976
extension to show up in Safari.


88
00:03:00,616 --> 00:03:04,266
We love the content blockers and


89
00:03:04,266 --> 00:03:05,466
Safari app extensions you have


90
00:03:05,466 --> 00:03:07,566
created, and we also really


91
00:03:07,566 --> 00:03:09,126
appreciate those of you who have


92
00:03:09,126 --> 00:03:10,676
filed bug reports, suggested


93
00:03:10,676 --> 00:03:12,636
improvements, and commented on


94
00:03:12,636 --> 00:03:13,946
the Safari developer forums.


95
00:03:16,706 --> 00:03:17,876
And in response to that


96
00:03:17,876 --> 00:03:20,046
feedback, we've added new APIs


97
00:03:20,136 --> 00:03:21,366
for Safari app extensions to


98
00:03:21,366 --> 00:03:21,696
use.


99
00:03:24,156 --> 00:03:25,696
Earlier this year, we built out


100
00:03:25,696 --> 00:03:27,006
our windows and tabs APIs.


101
00:03:27,806 --> 00:03:29,066
Now you can navigate a tab


102
00:03:29,166 --> 00:03:30,656
directly from your app extension


103
00:03:30,656 --> 00:03:32,236
process to your full-page


104
00:03:32,236 --> 00:03:33,676
content, to provide extra


105
00:03:33,676 --> 00:03:35,136
functionality, like a dashboard.


106
00:03:35,776 --> 00:03:38,606
You can get all the open windows


107
00:03:38,606 --> 00:03:39,926
and tabs to provide things like


108
00:03:39,966 --> 00:03:43,226
bookmarking services, and get a


109
00:03:43,226 --> 00:03:44,826
reference to the containing tab


110
00:03:44,826 --> 00:03:46,016
and window when handling a


111
00:03:46,016 --> 00:03:47,166
message from your injected


112
00:03:47,166 --> 00:03:48,756
script to do things like


113
00:03:48,756 --> 00:03:52,466
updating your toolbar items.


114
00:03:52,666 --> 00:03:53,796
We've added a way for you to get


115
00:03:53,796 --> 00:03:55,176
the visible contents of a page.


116
00:03:55,876 --> 00:03:57,406
You could use this, for example,


117
00:03:57,406 --> 00:03:58,696
to show a custom visual


118
00:03:58,696 --> 00:04:00,346
representation of your user's


119
00:04:00,346 --> 00:04:00,706
tabs.


120
00:04:01,416 --> 00:04:04,426
And you now have more control


121
00:04:04,426 --> 00:04:06,646
over your UI in Safari, with the


122
00:04:06,646 --> 00:04:08,296
ability to programmatically show


123
00:04:08,296 --> 00:04:09,816
and dismiss your pop-overs when


124
00:04:09,816 --> 00:04:11,216
it makes the most sense for your


125
00:04:11,216 --> 00:04:11,856
use cases.


126
00:04:14,616 --> 00:04:15,896
You gave us feedback about


127
00:04:15,896 --> 00:04:16,935
wanting to know when a page will


128
00:04:16,935 --> 00:04:18,676
navigate, in order to redirect


129
00:04:18,676 --> 00:04:19,546
for a different version of the


130
00:04:19,546 --> 00:04:20,096
website.


131
00:04:21,136 --> 00:04:23,056
New in Safari 13, there's a


132
00:04:23,056 --> 00:04:24,446
callback that your app extension


133
00:04:24,446 --> 00:04:26,056
can handle to get notified of


134
00:04:26,056 --> 00:04:27,116
the full redirect chain.


135
00:04:27,666 --> 00:04:30,736
For those of you who developed


136
00:04:30,736 --> 00:04:32,386
content blockers, we heard that


137
00:04:32,386 --> 00:04:33,636
you really want a way to show


138
00:04:33,636 --> 00:04:35,566
off to your users just how much


139
00:04:35,566 --> 00:04:36,576
you're helping protect them


140
00:04:36,806 --> 00:04:38,456
against tracking, crypto


141
00:04:38,456 --> 00:04:40,096
currency mining, or other


142
00:04:40,096 --> 00:04:41,026
unnecessary scripts.


143
00:04:41,786 --> 00:04:44,636
So we're excited to announce, in


144
00:04:44,636 --> 00:04:46,426
Safari 13, that you can now


145
00:04:46,426 --> 00:04:47,756
associate your content blocker


146
00:04:47,756 --> 00:04:49,056
with your Safari app extension,


147
00:04:49,616 --> 00:04:51,896
so that it can get notified when


148
00:04:51,896 --> 00:04:52,666
content is blocked.


149
00:04:54,306 --> 00:04:55,646
Users will be able to just turn


150
00:04:55,646 --> 00:04:57,176
on the Safari app extension if


151
00:04:57,176 --> 00:04:58,576
they want to get statistics from


152
00:04:58,576 --> 00:05:00,566
you on what you've blocked or


153
00:05:00,566 --> 00:05:01,606
keep it off if they want the


154
00:05:01,606 --> 00:05:02,896
most private experience.


155
00:05:03,616 --> 00:05:06,986
I've gone through these APIs


156
00:05:07,066 --> 00:05:08,896
pretty quickly here, but we've


157
00:05:08,896 --> 00:05:10,076
created a video that you can


158
00:05:10,076 --> 00:05:11,756
watch to learn more in-depth how


159
00:05:11,756 --> 00:05:12,386
to adopt them.


160
00:05:13,826 --> 00:05:16,246
Check it out in the WWDC app.


161
00:05:17,956 --> 00:05:19,746
The last time you checked out


162
00:05:19,746 --> 00:05:21,566
Safari app extensions might've


163
00:05:21,566 --> 00:05:23,186
been in 2016, when we first


164
00:05:23,186 --> 00:05:23,846
introduced them.


165
00:05:24,996 --> 00:05:25,946
As you can see from what we


166
00:05:25,946 --> 00:05:28,006
covered today, we've added a lot


167
00:05:28,006 --> 00:05:29,636
of functionality and APIs since


168
00:05:29,686 --> 00:05:29,916
then.


169
00:05:30,876 --> 00:05:32,046
If you haven't converted your


170
00:05:32,046 --> 00:05:33,466
Legacy Safari extension yet,


171
00:05:34,046 --> 00:05:35,456
head on over to our guide on


172
00:05:35,456 --> 00:05:36,786
developer.apple.com.


173
00:05:37,376 --> 00:05:40,666
And that's improvements to


174
00:05:40,666 --> 00:05:41,586
Safari extensions.


175
00:05:44,336 --> 00:05:45,726
Lastly, I want to talk about


176
00:05:45,726 --> 00:05:47,146
following links on macOS.


177
00:05:47,336 --> 00:05:50,396
I'm of course talking about


178
00:05:50,396 --> 00:05:52,216
following links like these to


179
00:05:52,216 --> 00:05:54,956
websites and apps.


180
00:05:55,076 --> 00:05:56,176
For those of you bringing your


181
00:05:56,176 --> 00:05:58,216
iPad apps to the Mac, you might


182
00:05:58,216 --> 00:05:59,676
be wondering how this is going


183
00:05:59,676 --> 00:06:00,076
to work.


184
00:06:01,006 --> 00:06:02,646
In-app web browsing isn't common


185
00:06:02,646 --> 00:06:04,386
on macOS, but it is on iOS.


186
00:06:05,146 --> 00:06:07,736
And on iOS, you're probably


187
00:06:07,736 --> 00:06:09,276
using SafariViewController for


188
00:06:09,376 --> 00:06:10,976
the best in-app web browsing


189
00:06:10,976 --> 00:06:11,536
experience.


190
00:06:12,996 --> 00:06:14,006
When you open a link in


191
00:06:14,006 --> 00:06:15,446
SafariViewController in your Mac


192
00:06:15,446 --> 00:06:17,396
app, it does exactly what your


193
00:06:17,796 --> 00:06:19,006
macOS users will expect.


194
00:06:19,646 --> 00:06:21,196
It opens the link directly in


195
00:06:21,196 --> 00:06:22,666
their browser, and immediately


196
00:06:22,666 --> 00:06:24,376
calls SafariViewController did


197
00:06:24,376 --> 00:06:25,366
finish to notify you.


198
00:06:26,006 --> 00:06:28,676
For those of you who have


199
00:06:28,676 --> 00:06:30,256
implemented custom in-app web


200
00:06:30,256 --> 00:06:32,166
browser on iOS, you should


201
00:06:32,166 --> 00:06:34,196
strongly instead consider


202
00:06:34,196 --> 00:06:35,826
directly opening links on Mac,


203
00:06:36,406 --> 00:06:37,526
so that they open in the user's


204
00:06:37,526 --> 00:06:38,096
web browser.


205
00:06:38,576 --> 00:06:39,706
That's what your macOS users


206
00:06:39,706 --> 00:06:43,576
will be expecting.


207
00:06:43,576 --> 00:06:44,576
We're also excited that


208
00:06:44,576 --> 00:06:45,736
universal links are coming to


209
00:06:45,736 --> 00:06:46,576
macOS this year.


210
00:06:47,956 --> 00:06:49,916
On iOS and macOS, universal


211
00:06:49,916 --> 00:06:52,696
links allow you to have ordinary


212
00:06:52,736 --> 00:06:54,816
HTTPS URLs to your website open


213
00:06:54,816 --> 00:06:55,906
in your app instead, if it's


214
00:06:55,906 --> 00:06:56,386
installed.


215
00:06:56,996 --> 00:06:59,646
It's way better than custom URL


216
00:06:59,696 --> 00:07:01,386
schemes, which just don't work


217
00:07:01,556 --> 00:07:04,986
if your app isn't installed.


218
00:07:05,056 --> 00:07:06,736
Universal links on Mac initially


219
00:07:06,736 --> 00:07:08,146
open in your web browser, just


220
00:07:08,146 --> 00:07:10,346
like before, and when they open


221
00:07:10,346 --> 00:07:11,676
in Safari and your app is


222
00:07:11,676 --> 00:07:13,316
installed, Safari will show a


223
00:07:13,316 --> 00:07:14,666
banner at the top of the


224
00:07:14,666 --> 00:07:15,196
webpage.


225
00:07:16,196 --> 00:07:18,366
There, the user can choose to


226
00:07:18,366 --> 00:07:19,696
open the link in your app, and


227
00:07:20,496 --> 00:07:22,646
if they do, future link follows


228
00:07:22,646 --> 00:07:23,876
will be open directly in your


229
00:07:23,876 --> 00:07:23,976
app.


230
00:07:26,736 --> 00:07:28,356
To learn more about universal


231
00:07:28,356 --> 00:07:29,996
links, check out the video we


232
00:07:29,996 --> 00:07:31,916
made, available right now in the


233
00:07:31,916 --> 00:07:33,546
WWDC app.


234
00:07:35,106 --> 00:07:36,516
And that's following links on


235
00:07:36,516 --> 00:07:36,936
macOS.


236
00:07:37,666 --> 00:07:40,746
There have been a bunch of great


237
00:07:40,746 --> 00:07:42,596
improvements in the intersection


238
00:07:42,596 --> 00:07:44,226
of app development and web


239
00:07:44,226 --> 00:07:45,106
technologies this year.


240
00:07:45,726 --> 00:07:48,796
One last point I want to leave


241
00:07:48,796 --> 00:07:49,106
you with.


242
00:07:50,016 --> 00:07:51,806
We're committed to making Safari


243
00:07:51,806 --> 00:07:53,076
app extensions and content


244
00:07:53,076 --> 00:07:54,186
blockers better each year.


245
00:07:54,326 --> 00:07:56,226
If you had previously checked


246
00:07:56,226 --> 00:07:57,516
them out but found that a


247
00:07:57,516 --> 00:07:59,706
particular API or capability was


248
00:07:59,706 --> 00:08:01,636
missing, it's worth taking


249
00:08:01,636 --> 00:08:03,046
another look and converting your


250
00:08:03,046 --> 00:08:04,306
Legacy Safari extension.


251
00:08:04,916 --> 00:08:08,046
To find out more about what we


252
00:08:08,046 --> 00:08:10,046
covered today, check out the


253
00:08:10,046 --> 00:08:11,426
WWDC app, where there'll be


254
00:08:11,426 --> 00:08:12,686
links to resources we talked


255
00:08:12,686 --> 00:08:14,586
about and further documentation.


256
00:08:15,836 --> 00:08:16,906
And if you have any questions


257
00:08:16,906 --> 00:08:18,796
right now, we'll be headed over


258
00:08:18,796 --> 00:08:19,886
to Technology Lab 3.


259
00:08:20,286 --> 00:08:21,196
We'd love to see you there.


260
00:08:22,986 --> 00:08:24,186
Thank you so much and have a


261
00:08:24,186 --> 00:08:24,966
great WWDC.


262
00:08:25,508 --> 00:08:27,508
[ Applause ]

