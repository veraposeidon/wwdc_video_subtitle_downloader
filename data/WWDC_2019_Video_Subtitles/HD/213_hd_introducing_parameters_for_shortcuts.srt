1
00:00:00,506 --> 00:00:04,500
[ Music ]


2
00:00:07,516 --> 00:00:15,546
[ Applause ]


3
00:00:16,046 --> 00:00:16,606
>> Hi everybody.


4
00:00:16,946 --> 00:00:18,546
My name's Ari and I'm really


5
00:00:18,546 --> 00:00:20,046
excited to be here to tell you


6
00:00:20,046 --> 00:00:21,866
today about some new updates to


7
00:00:21,866 --> 00:00:23,466
Shortcuts in iOS 13.


8
00:00:24,586 --> 00:00:28,256
In iOS 12 we extended SiriKit by


9
00:00:28,256 --> 00:00:30,106
introducing the Shortcuts APIs.


10
00:00:30,426 --> 00:00:31,836
Which let you expose actions


11
00:00:31,836 --> 00:00:33,246
from your apps to Siri.


12
00:00:35,136 --> 00:00:36,726
Shortcut actions exposed from


13
00:00:36,726 --> 00:00:38,466
your apps can be used in three


14
00:00:38,466 --> 00:00:39,216
different ways.


15
00:00:39,796 --> 00:00:41,386
They can be used as suggestions.


16
00:00:41,966 --> 00:00:43,196
They can be used through voice.


17
00:00:43,456 --> 00:00:45,176
And they can be used as part of


18
00:00:45,176 --> 00:00:46,376
multi-step shortcuts.


19
00:00:47,066 --> 00:00:50,866
Now, with suggestions, Siri will


20
00:00:50,866 --> 00:00:52,496
suggest your Shortcuts to the


21
00:00:52,496 --> 00:00:54,856
user as just the right time in


22
00:00:54,856 --> 00:00:56,616
search and on the lock screen to


23
00:00:56,616 --> 00:00:58,096
accelerate things they do with


24
00:00:58,096 --> 00:00:59,426
your apps every day.


25
00:01:00,536 --> 00:01:03,236
With voice, customers can use


26
00:01:03,336 --> 00:01:05,126
any capability of your apps just


27
00:01:05,126 --> 00:01:06,176
by asking Siri.


28
00:01:07,866 --> 00:01:09,936
This is really powerful, because


29
00:01:10,066 --> 00:01:11,446
Shortcuts makes it super easy to


30
00:01:11,446 --> 00:01:13,336
voice enable your app, which


31
00:01:13,336 --> 00:01:14,556
lets people use your app in


32
00:01:14,556 --> 00:01:15,566
totally new ways.


33
00:01:16,266 --> 00:01:17,436
Whether they're on the go with


34
00:01:17,436 --> 00:01:19,856
AirPods, in the car with CarPlay


35
00:01:20,166 --> 00:01:22,016
or at home with HomePod, or just


36
00:01:22,016 --> 00:01:24,136
from across the room with "Hey


37
00:01:24,976 --> 00:01:25,186
Siri".


38
00:01:25,856 --> 00:01:27,626
Lastly, users can build their


39
00:01:27,626 --> 00:01:29,466
own shortcuts in the Shortcuts


40
00:01:29,466 --> 00:01:31,316
app, which include multiple


41
00:01:31,316 --> 00:01:32,736
actions, including those from


42
00:01:32,736 --> 00:01:33,466
your apps.


43
00:01:34,006 --> 00:01:37,136
Now, this year we're talking


44
00:01:37,136 --> 00:01:39,786
Shortcuts APIs even further and


45
00:01:39,786 --> 00:01:41,206
we have some really exciting API


46
00:01:41,206 --> 00:01:43,356
updates to share that take voice


47
00:01:43,356 --> 00:01:44,936
and multi-step shortcuts to the


48
00:01:44,936 --> 00:01:45,566
next level.


49
00:01:46,566 --> 00:01:47,736
So let's dive into what's new.


50
00:01:50,736 --> 00:01:53,726
In iOS 13 the Shortcuts app is


51
00:01:53,886 --> 00:01:55,746
redesigned, and it's built into


52
00:01:55,836 --> 00:01:57,516
iOS, so it's easier than ever


53
00:01:57,516 --> 00:01:59,216
for people to discover and use


54
00:01:59,216 --> 00:01:59,796
Shortcuts.


55
00:02:01,556 --> 00:02:02,816
Now, after we announced


56
00:02:02,816 --> 00:02:04,506
Shortcuts last year, the biggest


57
00:02:04,506 --> 00:02:05,986
request we heard from developers


58
00:02:06,256 --> 00:02:07,666
was to add parameters.


59
00:02:08,386 --> 00:02:10,145
So we're really excited to share


60
00:02:10,145 --> 00:02:12,106
that in iOS 13 we're introducing


61
00:02:12,106 --> 00:02:13,686
support for parameters and it


62
00:02:13,686 --> 00:02:15,116
enabled something we call


63
00:02:15,116 --> 00:02:16,476
conversational shortcuts.


64
00:02:17,326 --> 00:02:19,016
This basically allows users to


65
00:02:19,016 --> 00:02:20,436
have a conversation with your


66
00:02:20,676 --> 00:02:22,416
app and you control the


67
00:02:22,416 --> 00:02:23,186
conversation.


68
00:02:23,446 --> 00:02:26,176
So you can prompt the user for


69
00:02:26,176 --> 00:02:27,896
information you need and respond


70
00:02:27,896 --> 00:02:29,416
dynamically based on the users


71
00:02:29,416 --> 00:02:31,506
input and their current context.


72
00:02:32,246 --> 00:02:34,386
This opens up really totally new


73
00:02:34,386 --> 00:02:36,356
use cases for what people can do


74
00:02:36,426 --> 00:02:37,916
with Siri and apps, and I'm


75
00:02:37,916 --> 00:02:39,116
excited to tell you more about


76
00:02:39,116 --> 00:02:39,986
it in just a second.


77
00:02:40,966 --> 00:02:43,446
But next, we're adding new ways


78
00:02:43,486 --> 00:02:45,016
for users to customize your


79
00:02:45,016 --> 00:02:46,736
shortcut actions through a new


80
00:02:46,786 --> 00:02:48,886
customization UI that acts on


81
00:02:48,886 --> 00:02:50,576
the same parameters as the ones


82
00:02:50,576 --> 00:02:51,756
that you define for the voice


83
00:02:51,756 --> 00:02:52,306
interaction.


84
00:02:52,806 --> 00:02:55,806
You can also enable advanced


85
00:02:55,806 --> 00:02:58,606
scenarios like outputs and


86
00:02:59,416 --> 00:02:59,776
variables.


87
00:03:00,626 --> 00:03:02,686
Lastly, we have an updated Add


88
00:03:02,686 --> 00:03:04,906
to Siri UI, which makes it easy


89
00:03:04,906 --> 00:03:06,116
for people to get started with


90
00:03:06,116 --> 00:03:08,126
Shortcuts inside of your app.


91
00:03:08,676 --> 00:03:11,126
So, let's take a look at what


92
00:03:11,126 --> 00:03:12,486
some of these new capabilities


93
00:03:12,486 --> 00:03:13,866
mean to the voice experience


94
00:03:13,906 --> 00:03:14,856
inside of Siri.


95
00:03:16,306 --> 00:03:18,106
I have a great new Siri


96
00:03:18,106 --> 00:03:18,626
shortcut.


97
00:03:18,626 --> 00:03:20,166
It's called Add to Instacart,


98
00:03:20,166 --> 00:03:21,806
and it adds items to my cart.


99
00:03:22,496 --> 00:03:23,836
So, with conversational


100
00:03:23,836 --> 00:03:25,576
shortcuts, when I say Add to


101
00:03:25,576 --> 00:03:27,726
Instacart, Instacart can ask


102
00:03:27,726 --> 00:03:29,566
what I want to add with custom


103
00:03:29,566 --> 00:03:30,136
dialogue.


104
00:03:30,336 --> 00:03:32,076
And I'll say bananas.


105
00:03:32,786 --> 00:03:36,026
So, there are a few different


106
00:03:36,026 --> 00:03:37,056
options for bananas.


107
00:03:37,616 --> 00:03:38,726
Instacart will ask which


108
00:03:38,726 --> 00:03:40,896
specific one I want by showing a


109
00:03:40,896 --> 00:03:42,256
disambiguation.


110
00:03:42,506 --> 00:03:43,726
I'll stay I want the organic


111
00:03:43,726 --> 00:03:44,216
bananas.


112
00:03:44,886 --> 00:03:48,286
So, if it's contextually


113
00:03:48,286 --> 00:03:49,796
appropriate, the app can ask


114
00:03:49,796 --> 00:03:51,516
additional questions based on


115
00:03:51,516 --> 00:03:52,526
what I've said so far.


116
00:03:53,096 --> 00:03:55,356
In this case, Instacart will ask


117
00:03:55,356 --> 00:03:57,166
how many bananas I want, and


118
00:03:57,896 --> 00:03:59,746
I'll say six.


119
00:04:00,066 --> 00:04:01,686
Lastly, Siri can let me know


120
00:04:01,686 --> 00:04:03,416
that the task is complete with


121
00:04:03,416 --> 00:04:05,056
custom dialogue and custom


122
00:04:05,056 --> 00:04:06,886
visuals from Instacart.


123
00:04:08,236 --> 00:04:10,176
I also have another new


124
00:04:10,176 --> 00:04:10,576
shortcut.


125
00:04:10,576 --> 00:04:12,266
It's from the MLB At Bat app,


126
00:04:12,616 --> 00:04:13,626
and it means that I can just


127
00:04:13,626 --> 00:04:15,276
say, "Hey Siri, watch baseball."


128
00:04:15,276 --> 00:04:17,146
and it will jump me right into


129
00:04:17,146 --> 00:04:18,555
my favorite team's games.


130
00:04:19,836 --> 00:04:21,596
So, the Philly's aren't actually


131
00:04:21,596 --> 00:04:22,796
playing right now, but with


132
00:04:22,796 --> 00:04:24,816
conversational shortcuts the MLB


133
00:04:24,816 --> 00:04:26,586
app can detect that and recover


134
00:04:26,586 --> 00:04:27,166
appropriately.


135
00:04:27,636 --> 00:04:28,716
Letting me know that there isn't


136
00:04:28,716 --> 00:04:30,206
a game on right now but giving


137
00:04:30,206 --> 00:04:31,696
me some other options of things


138
00:04:31,696 --> 00:04:33,406
I might want to watch instead.


139
00:04:34,456 --> 00:04:36,066
So, that's just a glimpse of


140
00:04:36,066 --> 00:04:37,626
what you can do in Siri, and in


141
00:04:37,626 --> 00:04:38,626
a minute we'll dive into the


142
00:04:38,626 --> 00:04:39,446
implementation.


143
00:04:39,976 --> 00:04:41,906
But first, let's talk about some


144
00:04:41,906 --> 00:04:43,646
updates to the Shortcuts app in


145
00:04:43,776 --> 00:04:45,116
iOS 13.


146
00:04:47,016 --> 00:04:49,466
The Shortcuts app is now built


147
00:04:49,466 --> 00:04:50,126
in to iOS.


148
00:04:50,596 --> 00:04:52,196
And you don't need to download


149
00:04:52,196 --> 00:04:52,996
it from the App Store.


150
00:04:53,896 --> 00:04:56,416
It's the one place where users


151
00:04:56,416 --> 00:04:57,506
can manage all of their


152
00:04:57,506 --> 00:04:58,066
shortcuts.


153
00:04:58,096 --> 00:04:59,656
So everything that used to be in


154
00:04:59,656 --> 00:05:01,316
settings in now here also.


155
00:05:01,896 --> 00:05:06,106
In the My Shortcuts tab the user


156
00:05:06,106 --> 00:05:07,356
can see all of the shortcuts


157
00:05:07,356 --> 00:05:08,576
they have set up and they can


158
00:05:08,576 --> 00:05:10,566
run them just by tapping on them


159
00:05:10,616 --> 00:05:12,726
or by saying the name to Siri.


160
00:05:13,086 --> 00:05:14,406
And there's no need to record a


161
00:05:14,406 --> 00:05:15,186
phrase first.


162
00:05:15,716 --> 00:05:18,756
In iOS 13 we also have a


163
00:05:18,756 --> 00:05:20,996
brand-new Automation tab where


164
00:05:20,996 --> 00:05:22,456
people can set up shortcuts that


165
00:05:22,456 --> 00:05:23,896
show up or even run


166
00:05:23,896 --> 00:05:25,846
automatically based on certain


167
00:05:25,846 --> 00:05:27,716
criteria like when they arrive


168
00:05:27,716 --> 00:05:29,216
at a particular location, when


169
00:05:29,216 --> 00:05:30,666
they get in the car, or when


170
00:05:30,666 --> 00:05:32,646
their alarm goes off in the


171
00:05:33,476 --> 00:05:33,736
morning.


172
00:05:34,186 --> 00:05:35,966
So, we all know Shortcuts is


173
00:05:36,006 --> 00:05:37,886
really useful, but it can be


174
00:05:37,986 --> 00:05:39,136
hard to start from a blank


175
00:05:39,136 --> 00:05:39,536
slate.


176
00:05:40,246 --> 00:05:42,286
So users can find hundreds of


177
00:05:42,526 --> 00:05:44,386
pre-built shortcuts to get


178
00:05:44,386 --> 00:05:45,916
started with in the Gallery tab.


179
00:05:46,786 --> 00:05:48,536
And this year, we're updating


180
00:05:48,536 --> 00:05:50,286
the gallery with a new section


181
00:05:50,286 --> 00:05:53,376
called Shortcuts from Your Apps.


182
00:05:53,476 --> 00:05:55,476
This section highlights relevant


183
00:05:55,476 --> 00:05:56,996
actions from third-party apps


184
00:05:56,996 --> 00:05:58,216
which includes your apps.


185
00:05:59,216 --> 00:06:00,936
So this is a really great


186
00:06:00,936 --> 00:06:02,726
opportunity to get your apps


187
00:06:02,726 --> 00:06:04,166
actions in front of the user


188
00:06:04,306 --> 00:06:05,476
even when they're not using your


189
00:06:06,216 --> 00:06:06,476
app.


190
00:06:07,456 --> 00:06:10,116
The shortcut editor has been


191
00:06:10,156 --> 00:06:11,936
updated also with a new natural


192
00:06:11,976 --> 00:06:12,826
language format.


193
00:06:13,066 --> 00:06:15,076
Here's what it looks like in the


194
00:06:15,076 --> 00:06:16,546
editor when the user sets up a


195
00:06:16,546 --> 00:06:19,376
shortcut with the Soup Chef app.


196
00:06:19,716 --> 00:06:21,536
Note how my app has exposed this


197
00:06:21,536 --> 00:06:23,596
description, Order 1 Clam


198
00:06:23,596 --> 00:06:23,996
Chowder.


199
00:06:23,996 --> 00:06:25,556
And the user can tweak those


200
00:06:25,586 --> 00:06:27,106
parameters at any time just by


201
00:06:27,106 --> 00:06:28,386
tapping on one of the buttons.


202
00:06:28,386 --> 00:06:30,086
Like tapping on 1 or Clam


203
00:06:30,086 --> 00:06:30,446
Chowder.


204
00:06:31,856 --> 00:06:34,246
The editor also has a new action


205
00:06:34,246 --> 00:06:36,086
pane which features actions from


206
00:06:36,086 --> 00:06:37,156
third-party apps that you can


207
00:06:37,156 --> 00:06:39,626
drag or tap to add to your


208
00:06:40,836 --> 00:06:41,176
shortcut.


209
00:06:41,176 --> 00:06:43,106
Lastly, your apps actions can


210
00:06:43,106 --> 00:06:45,026
now provide outputs, which means


211
00:06:45,026 --> 00:06:46,436
they can be hooked up to other


212
00:06:46,436 --> 00:06:48,156
actions to create even more


213
00:06:48,156 --> 00:06:49,216
powerful shortcuts.


214
00:06:50,086 --> 00:06:52,076
For example, the Soup Chef app


215
00:06:52,506 --> 00:06:54,206
can share an ETA.


216
00:06:54,406 --> 00:06:56,646
So you can add it to an Add New


217
00:06:56,646 --> 00:06:58,336
Reminder actions to make a


218
00:06:58,336 --> 00:06:59,646
shortcut that adds a reminder to


219
00:06:59,646 --> 00:07:01,056
pick up your soup exactly when


220
00:07:01,056 --> 00:07:01,456
it's ready.


221
00:07:02,046 --> 00:07:04,476
So, that's what's new in the


222
00:07:04,476 --> 00:07:05,836
Shortcuts app.


223
00:07:06,216 --> 00:07:07,716
But we also have some updates to


224
00:07:07,716 --> 00:07:08,646
Add to Siri.


225
00:07:09,936 --> 00:07:11,406
Now, traditionally, voice


226
00:07:11,406 --> 00:07:13,006
functionality can be hard for


227
00:07:13,006 --> 00:07:14,696
users to discover, because they


228
00:07:14,696 --> 00:07:16,066
don't know which features of


229
00:07:16,106 --> 00:07:18,166
your app are available or what


230
00:07:18,166 --> 00:07:19,476
to say in order to use them.


231
00:07:19,476 --> 00:07:21,766
Add to Siri makes this easy


232
00:07:21,846 --> 00:07:23,376
because people are already using


233
00:07:23,376 --> 00:07:23,776
your app.


234
00:07:24,026 --> 00:07:25,936
So you can add the Add to Siri


235
00:07:25,936 --> 00:07:27,816
button in the relevant parts of


236
00:07:27,816 --> 00:07:30,206
your app and it -- the user


237
00:07:30,206 --> 00:07:31,596
actually wants to use it with


238
00:07:31,766 --> 00:07:32,366
their voice.


239
00:07:33,076 --> 00:07:35,796
In iOS 13 we've redesigned the


240
00:07:35,796 --> 00:07:36,766
Add to Siri sheet.


241
00:07:37,176 --> 00:07:39,026
The new UI lets the user set up


242
00:07:39,026 --> 00:07:40,186
shortcuts without having to


243
00:07:40,186 --> 00:07:40,996
record a phrase.


244
00:07:41,406 --> 00:07:43,366
They can just type a phrase or


245
00:07:43,366 --> 00:07:44,386
they can accept one that's


246
00:07:44,386 --> 00:07:45,376
suggested by you.


247
00:07:46,816 --> 00:07:49,156
Afterwards, saying the phrase to


248
00:07:49,156 --> 00:07:50,956
Siri will run the shortcut.


249
00:07:50,956 --> 00:07:54,286
And if you tap on the action


250
00:07:54,286 --> 00:07:56,806
under Do, the user can tweak the


251
00:07:56,806 --> 00:07:58,216
behavior of the shortcut just


252
00:07:58,216 --> 00:07:59,366
like they can from inside the


253
00:07:59,366 --> 00:07:59,996
Shortcuts app.


254
00:08:00,056 --> 00:08:03,596
Now, let's dive into the


255
00:08:03,706 --> 00:08:04,606
implementation.


256
00:08:04,996 --> 00:08:06,786
First, we're going to talk about


257
00:08:06,786 --> 00:08:08,286
how to enable your shortcuts to


258
00:08:08,286 --> 00:08:10,026
be customized by the user and


259
00:08:10,526 --> 00:08:11,796
then we'll cover parameter


260
00:08:11,796 --> 00:08:13,156
resolution and how to use it to


261
00:08:13,156 --> 00:08:14,266
implement a great voice


262
00:08:14,266 --> 00:08:14,886
experience.


263
00:08:15,486 --> 00:08:17,736
Then, we'll talk about how to


264
00:08:17,736 --> 00:08:19,226
deal with parameters that have


265
00:08:19,226 --> 00:08:20,436
dependencies on each other.


266
00:08:20,436 --> 00:08:23,056
And lastly, we'll cover how


267
00:08:23,056 --> 00:08:25,186
dynamic options and outputs can


268
00:08:25,186 --> 00:08:26,266
help take your actions to the


269
00:08:26,266 --> 00:08:27,746
next level in the shortcut


270
00:08:27,746 --> 00:08:27,976
editor.


271
00:08:31,256 --> 00:08:32,895
So, let's start by enabling


272
00:08:32,895 --> 00:08:34,606
Shortcut Customization for an


273
00:08:34,606 --> 00:08:35,785
app that I've been developing.


274
00:08:37,046 --> 00:08:40,126
I'm really, really into soup and


275
00:08:40,126 --> 00:08:41,405
so I've been working on an app


276
00:08:41,405 --> 00:08:42,885
called Soup Chef, which lets


277
00:08:42,885 --> 00:08:43,976
people order soups from their


278
00:08:43,976 --> 00:08:44,826
favorite restaurants.


279
00:08:45,606 --> 00:08:47,396
I want to enable shortcuts that


280
00:08:47,396 --> 00:08:48,676
let the user order a soup and


281
00:08:48,676 --> 00:08:50,256
choose how many soups they want


282
00:08:50,466 --> 00:08:51,856
right from inside of the action.


283
00:08:53,216 --> 00:08:55,126
So, in order to set this up


284
00:08:55,276 --> 00:08:57,046
let's start in the Intent editor


285
00:08:57,046 --> 00:08:58,026
in Xcode.


286
00:08:59,306 --> 00:09:01,856
As you know, an Intent is a


287
00:09:01,856 --> 00:09:03,376
specification of a task that the


288
00:09:03,376 --> 00:09:05,696
user can complete in your app.


289
00:09:06,006 --> 00:09:07,736
In this case, ordering soup.


290
00:09:08,916 --> 00:09:10,846
You should define parameters for


291
00:09:10,956 --> 00:09:12,616
every piece of information that


292
00:09:12,616 --> 00:09:14,426
you need from the user in order


293
00:09:14,426 --> 00:09:16,566
to complete that task.


294
00:09:16,846 --> 00:09:18,056
The set of parameters that you


295
00:09:18,056 --> 00:09:20,706
define here is used for both the


296
00:09:21,036 --> 00:09:22,826
set of questions that Siri will


297
00:09:22,826 --> 00:09:24,716
ask in conversational shortcuts


298
00:09:25,046 --> 00:09:27,256
as well as the set of parameters


299
00:09:27,406 --> 00:09:28,346
that you can edit in the


300
00:09:28,346 --> 00:09:28,976
shortcuts editor.


301
00:09:31,646 --> 00:09:33,626
From each parameter that you add


302
00:09:33,626 --> 00:09:35,386
to your Intent, you can choose


303
00:09:35,496 --> 00:09:37,236
from the list of supported types


304
00:09:37,286 --> 00:09:38,556
that are provided by the system


305
00:09:39,326 --> 00:09:42,136
or you can create an Enum, or


306
00:09:42,136 --> 00:09:43,786
you can even in iOS 13 create


307
00:09:43,786 --> 00:09:44,986
your own custom types.


308
00:09:45,486 --> 00:09:48,706
Once you pick a type, you'll see


309
00:09:48,706 --> 00:09:49,886
some additional settings that


310
00:09:49,886 --> 00:09:51,296
let you customize that parameter


311
00:09:51,296 --> 00:09:52,706
which are specific to that type.


312
00:09:53,146 --> 00:09:54,956
For example, if I pick String,


313
00:09:55,306 --> 00:09:56,666
I'll see some new options for


314
00:09:56,666 --> 00:09:58,546
capitalization and autocorrect


315
00:09:58,546 --> 00:09:59,036
behavior.


316
00:10:01,236 --> 00:10:03,146
For this parameter I'm going to


317
00:10:03,146 --> 00:10:04,846
choose a soup enum type that I


318
00:10:04,846 --> 00:10:05,606
already created.


319
00:10:06,146 --> 00:10:08,496
Now, since I'm updating an


320
00:10:08,496 --> 00:10:10,156
existing parameter, I need to


321
00:10:10,156 --> 00:10:12,396
check the User Facing checkbox


322
00:10:12,546 --> 00:10:14,036
so that this parameter can be


323
00:10:14,036 --> 00:10:15,266
exposed to Siri and the


324
00:10:15,266 --> 00:10:16,446
Shortcuts app.


325
00:10:17,276 --> 00:10:19,276
For new parameters that I add,


326
00:10:19,276 --> 00:10:22,336
this will be checked by default.


327
00:10:22,566 --> 00:10:23,826
Next, I'll need to fill in some


328
00:10:23,826 --> 00:10:25,016
new information for my


329
00:10:25,016 --> 00:10:25,476
parameter.


330
00:10:25,476 --> 00:10:26,896
I'm going to add this Display


331
00:10:26,896 --> 00:10:28,226
Name, because that's used to


332
00:10:28,226 --> 00:10:29,776
show the parameter inside of the


333
00:10:29,776 --> 00:10:30,446
shortcut editor.


334
00:10:30,446 --> 00:10:33,196
Then, because this is an


335
00:10:33,196 --> 00:10:35,836
existing Intent, I also need to


336
00:10:35,836 --> 00:10:36,926
check the Intent is


337
00:10:36,926 --> 00:10:38,696
user-configurable checkbox,


338
00:10:38,896 --> 00:10:39,996
which makes the Intent as a


339
00:10:39,996 --> 00:10:42,026
whole available to both Siri and


340
00:10:42,026 --> 00:10:43,286
the Shortcuts app.


341
00:10:44,056 --> 00:10:46,636
Now, lastly, I need to fill in a


342
00:10:46,636 --> 00:10:47,736
parameter summary.


343
00:10:48,576 --> 00:10:49,886
I want to include the parameters


344
00:10:49,946 --> 00:10:51,866
quantity and soup in the


345
00:10:51,866 --> 00:10:53,436
parameter summary so that


346
00:10:53,436 --> 00:10:54,596
they're really easy for the user


347
00:10:54,596 --> 00:10:55,896
to tweak in the shortcut editor.


348
00:10:56,236 --> 00:10:58,826
So, I'll add a string, order


349
00:10:58,826 --> 00:11:00,636
quantity soup, and I'll let


350
00:11:00,636 --> 00:11:02,646
Xcode turn quantity and soup


351
00:11:02,836 --> 00:11:06,886
into variables for me in Xcode.


352
00:11:07,196 --> 00:11:07,896
So that's it.


353
00:11:07,896 --> 00:11:09,196
That's actually all you have to


354
00:11:09,196 --> 00:11:10,906
do to get your shortcuts to be


355
00:11:10,906 --> 00:11:12,166
exposed like this in the


356
00:11:12,166 --> 00:11:12,956
shortcut editor.


357
00:11:13,036 --> 00:11:16,656
Now that the Intent is


358
00:11:16,656 --> 00:11:18,786
configurable, and it shows up in


359
00:11:18,786 --> 00:11:19,566
the Shortcuts app, it's


360
00:11:19,656 --> 00:11:21,066
ready-to-use parameters.


361
00:11:21,266 --> 00:11:23,036
So, the next thing we need to be


362
00:11:23,036 --> 00:11:24,526
able to do is resolve the


363
00:11:24,526 --> 00:11:25,806
parameters of the Intent.


364
00:11:26,376 --> 00:11:28,306
Let's talk about how to do that.


365
00:11:28,856 --> 00:11:32,166
In iOS 12, when the user invokes


366
00:11:32,166 --> 00:11:33,306
a shortcut through Siri it goes


367
00:11:33,306 --> 00:11:34,406
through two phases.


368
00:11:34,726 --> 00:11:36,656
First Confirm and then Handle.


369
00:11:38,316 --> 00:11:40,106
This year we're adding a third


370
00:11:40,106 --> 00:11:41,446
phase which is called Resolve.


371
00:11:41,686 --> 00:11:42,956
And it should be familiar to you


372
00:11:42,956 --> 00:11:43,996
if you've already worked with


373
00:11:43,996 --> 00:11:45,516
SiriKit APIs in the past.


374
00:11:49,376 --> 00:11:52,216
In the Resolve phase Siri goes


375
00:11:52,216 --> 00:11:53,576
through each parameter that


376
00:11:53,576 --> 00:11:54,716
you've defined on your Intent


377
00:11:54,986 --> 00:11:57,746
and asks your Intent handler to


378
00:11:57,746 --> 00:11:58,786
resolve that parameter.


379
00:11:58,786 --> 00:12:00,236
To decide whether or not to ask


380
00:12:00,416 --> 00:12:02,046
the user a question.


381
00:12:02,756 --> 00:12:05,196
For Soup Chef, Siri will first


382
00:12:05,196 --> 00:12:06,726
call Resolve on the soup


383
00:12:06,726 --> 00:12:08,006
parameter which might ask a


384
00:12:08,006 --> 00:12:09,226
question like, "What soup do you


385
00:12:09,226 --> 00:12:09,526
want?"


386
00:12:10,756 --> 00:12:12,496
And then it will call Resolve on


387
00:12:12,496 --> 00:12:13,636
quantity, which could ask a


388
00:12:13,636 --> 00:12:14,926
question like, "How many soups


389
00:12:14,926 --> 00:12:15,416
do you want?"


390
00:12:16,096 --> 00:12:17,736
And lastly, it will ask it on


391
00:12:17,736 --> 00:12:19,196
store location, which might say,


392
00:12:19,196 --> 00:12:20,726
"Where do you want to order your


393
00:12:21,366 --> 00:12:23,056
soup from?"


394
00:12:23,586 --> 00:12:24,776
Once all the parameters are


395
00:12:24,776 --> 00:12:26,326
resolved, Siri will invoke the


396
00:12:26,326 --> 00:12:28,076
same Confirm and Handle methods


397
00:12:28,076 --> 00:12:29,756
as the ones that we had in iOS


398
00:12:29,756 --> 00:12:29,996
12.


399
00:12:29,996 --> 00:12:34,716
So, let's take a look at what


400
00:12:34,716 --> 00:12:36,116
this means in code.


401
00:12:36,716 --> 00:12:38,756
Because Xcode automatically


402
00:12:38,756 --> 00:12:40,066
generates an Intent handling


403
00:12:40,066 --> 00:12:41,666
protocol for every Intent that


404
00:12:41,666 --> 00:12:42,156
you define.


405
00:12:42,716 --> 00:12:44,986
And you implement that protocol


406
00:12:44,986 --> 00:12:46,246
in your Intent handler.


407
00:12:46,456 --> 00:12:49,726
In iOS 12 Xcode generated these


408
00:12:49,726 --> 00:12:51,586
two methods; Confirm and Handle,


409
00:12:52,306 --> 00:12:53,356
which you would implement in


410
00:12:53,356 --> 00:12:54,566
order to execute your Intent.


411
00:12:55,636 --> 00:12:57,166
But this year, Xcode will also


412
00:12:57,166 --> 00:12:59,146
generate Resolve methods for


413
00:12:59,146 --> 00:13:00,086
each parameter that you've


414
00:13:00,086 --> 00:13:01,526
marked as configurable.


415
00:13:02,006 --> 00:13:05,366
Siri will call the resolve


416
00:13:05,366 --> 00:13:07,696
methods and ask questions in the


417
00:13:07,696 --> 00:13:09,096
order of the parameters that


418
00:13:09,096 --> 00:13:10,206
you've defined in Xcode.


419
00:13:10,206 --> 00:13:12,016
And you can drag and drop the


420
00:13:12,016 --> 00:13:13,676
parameters in Xcode to change


421
00:13:13,676 --> 00:13:14,496
the order of parameter


422
00:13:14,496 --> 00:13:14,946
resolution.


423
00:13:18,806 --> 00:13:19,836
When the Resolve method is


424
00:13:19,836 --> 00:13:22,206
called, the Intent is passed as


425
00:13:22,306 --> 00:13:23,866
input to the Resolve method,


426
00:13:24,176 --> 00:13:25,536
including a value for the


427
00:13:25,536 --> 00:13:27,166
parameter that's currently being


428
00:13:27,166 --> 00:13:27,536
resolved.


429
00:13:28,056 --> 00:13:29,476
So that value can come from a


430
00:13:29,476 --> 00:13:30,716
couple of different places.


431
00:13:31,886 --> 00:13:33,476
The first time the Resolve


432
00:13:33,476 --> 00:13:35,066
method is called, when the


433
00:13:35,066 --> 00:13:37,096
shortcut is being run, the value


434
00:13:37,096 --> 00:13:38,436
is filled in from whatever the


435
00:13:38,436 --> 00:13:40,096
user set on the shortcut when


436
00:13:40,096 --> 00:13:41,116
they created it.


437
00:13:41,476 --> 00:13:43,206
In this example, the soup field


438
00:13:43,206 --> 00:13:45,096
is empty, maybe because the user


439
00:13:45,096 --> 00:13:46,526
sometimes orders clam chowder


440
00:13:46,526 --> 00:13:47,946
and sometimes orders tomato


441
00:13:47,946 --> 00:13:48,186
soup.


442
00:13:48,786 --> 00:13:50,036
And they want to set up a


443
00:13:50,036 --> 00:13:50,946
shortcut that's going to ask


444
00:13:51,186 --> 00:13:52,436
them every time they use it


445
00:13:52,436 --> 00:13:53,146
which one they want.


446
00:13:54,406 --> 00:13:56,066
So, when the Resolve method is


447
00:13:56,066 --> 00:13:57,606
called the soup parameter will


448
00:13:57,606 --> 00:14:00,086
be filled in as empty because


449
00:14:00,086 --> 00:14:01,076
there was nothing filled out in


450
00:14:01,076 --> 00:14:03,706
the shortcut and that's going to


451
00:14:03,706 --> 00:14:05,566
be passed to the Intent that's


452
00:14:06,026 --> 00:14:07,736
passed to Resolve.


453
00:14:08,196 --> 00:14:09,566
The responsibility of the


454
00:14:09,566 --> 00:14:11,446
Resolve method is to provide a


455
00:14:11,496 --> 00:14:13,466
Resolution Result which


456
00:14:13,466 --> 00:14:15,106
determines what Siri will do


457
00:14:15,106 --> 00:14:15,696
next.


458
00:14:16,206 --> 00:14:19,216
Now again, because the field is


459
00:14:19,216 --> 00:14:20,896
empty, the Soup Chef app might


460
00:14:20,966 --> 00:14:22,546
want to ask the user for a value


461
00:14:22,916 --> 00:14:24,536
by passing the Needs Value


462
00:14:24,536 --> 00:14:25,356
Resolution Result.


463
00:14:27,276 --> 00:14:29,346
Passing Needs Value will cause


464
00:14:29,346 --> 00:14:31,056
Siri to ask a question for this


465
00:14:31,056 --> 00:14:32,546
parameter which the user can


466
00:14:32,546 --> 00:14:34,156
respond to with their voice.


467
00:14:35,256 --> 00:14:37,066
So Soup Chef might say, "What


468
00:14:37,066 --> 00:14:38,066
type of soup do you want?"


469
00:14:38,296 --> 00:14:39,746
And the user can respond with


470
00:14:39,746 --> 00:14:41,106
something like clam chowder.


471
00:14:41,726 --> 00:14:44,266
Now, the input that the user


472
00:14:44,266 --> 00:14:46,366
says, clam chowder, will be


473
00:14:46,496 --> 00:14:48,006
filled in to the Intent and the


474
00:14:48,006 --> 00:14:49,386
same Resolve method will be


475
00:14:49,386 --> 00:14:51,386
invoked again with that input


476
00:14:51,416 --> 00:14:51,906
this time.


477
00:14:52,136 --> 00:14:55,336
So the app can decide what to do


478
00:14:55,496 --> 00:14:55,766
next.


479
00:14:55,796 --> 00:14:57,456
In this case, clam chowder is a


480
00:14:57,456 --> 00:14:59,026
valid soup and we have it in


481
00:14:59,026 --> 00:14:59,416
stock.


482
00:14:59,416 --> 00:15:00,936
So the Resolve method should


483
00:15:00,936 --> 00:15:02,516
this time return success which


484
00:15:02,516 --> 00:15:03,706
will cause Siri to move on to


485
00:15:03,706 --> 00:15:05,056
the next parameter in the list.


486
00:15:05,526 --> 00:15:08,806
Now, if the user had set up the


487
00:15:08,806 --> 00:15:10,176
shortcut instead to have the


488
00:15:10,176 --> 00:15:11,976
parameter preset to clam


489
00:15:11,976 --> 00:15:13,476
chowder, because maybe they want


490
00:15:13,476 --> 00:15:14,346
their shortcut to order clam


491
00:15:14,346 --> 00:15:15,426
chowder every time without


492
00:15:15,426 --> 00:15:17,316
asking them, then that would be


493
00:15:17,316 --> 00:15:19,336
passed to Resolve instead of the


494
00:15:19,336 --> 00:15:21,186
empty value and in this case,


495
00:15:21,486 --> 00:15:22,646
the Resolve method can return


496
00:15:22,646 --> 00:15:24,616
success right away and Siri


497
00:15:24,616 --> 00:15:25,686
won't ask a question for that


498
00:15:25,686 --> 00:15:26,416
parameter at all.


499
00:15:26,416 --> 00:15:30,466
So, in the implementation of


500
00:15:30,466 --> 00:15:32,076
your Resolve method, you need to


501
00:15:32,076 --> 00:15:33,606
look at the current value of the


502
00:15:33,606 --> 00:15:34,766
parameter on the Intent.


503
00:15:35,286 --> 00:15:36,786
If there's no value, you might


504
00:15:36,786 --> 00:15:38,126
need to ask the user for a value


505
00:15:38,126 --> 00:15:39,366
by returning Needs Value.


506
00:15:39,746 --> 00:15:41,856
And if the user has just -- has


507
00:15:41,856 --> 00:15:43,046
filled out a value on the


508
00:15:43,046 --> 00:15:44,546
shortcut when they set it up or


509
00:15:44,736 --> 00:15:45,896
if they just said something to


510
00:15:45,896 --> 00:15:47,516
Siri, there might be a value


511
00:15:47,516 --> 00:15:49,096
there already which needs to be


512
00:15:49,096 --> 00:15:51,136
validated and hopefully passed


513
00:15:51,136 --> 00:15:52,616
as success.


514
00:15:52,876 --> 00:15:54,606
So every time your Resolve


515
00:15:54,606 --> 00:15:56,056
method is called, it needs to


516
00:15:56,056 --> 00:15:57,656
supply this Resolution Result.


517
00:15:58,336 --> 00:15:59,586
And I'm now going to hand it


518
00:15:59,586 --> 00:16:01,106
over to Roman to tell you about


519
00:16:01,106 --> 00:16:03,236
how you can provide great


520
00:16:03,276 --> 00:16:05,106
Resolution Results to provide


521
00:16:05,106 --> 00:16:06,956
robust voice experience in Siri.


522
00:16:07,606 --> 00:16:07,776
Roman.


523
00:16:08,516 --> 00:16:15,826
[ Applause ]


524
00:16:16,326 --> 00:16:16,856
>> Thanks Ari.


525
00:16:17,236 --> 00:16:19,426
Hello. When I'm building a voice


526
00:16:19,426 --> 00:16:21,246
experience I want to think about


527
00:16:21,456 --> 00:16:22,986
all of which cases that the user


528
00:16:22,986 --> 00:16:24,906
could say and how to handle them


529
00:16:24,906 --> 00:16:25,126
well.


530
00:16:25,666 --> 00:16:28,586
For example, if the user asks to


531
00:16:28,586 --> 00:16:29,686
order more soups than we have in


532
00:16:29,686 --> 00:16:31,206
stock we should tell them


533
00:16:31,206 --> 00:16:31,786
appropriately.


534
00:16:32,376 --> 00:16:35,916
If the user asks to order soup


535
00:16:35,916 --> 00:16:37,696
from a store that's far away, we


536
00:16:37,696 --> 00:16:38,956
can give them options of stores


537
00:16:38,956 --> 00:16:39,586
that are closer.


538
00:16:40,156 --> 00:16:43,286
On the Resolve step, this is


539
00:16:43,286 --> 00:16:44,736
your opportunity to influence


540
00:16:44,736 --> 00:16:46,486
Siri's behavior and decide


541
00:16:46,546 --> 00:16:47,976
whether or not Siri asks a


542
00:16:47,976 --> 00:16:48,436
question.


543
00:16:49,286 --> 00:16:50,746
And this is where you handle all


544
00:16:50,746 --> 00:16:52,056
which cases of the user input.


545
00:16:53,296 --> 00:16:54,766
In order to do that, you need to


546
00:16:54,766 --> 00:16:55,876
provide the Resolution Result.


547
00:16:57,406 --> 00:16:59,036
There are six Resolution Result


548
00:16:59,036 --> 00:17:00,256
types that you can choose from.


549
00:17:00,966 --> 00:17:02,266
Let's go through each one of


550
00:17:02,266 --> 00:17:03,836
them starting with needsValue.


551
00:17:05,425 --> 00:17:06,915
If the user didn't specify the


552
00:17:06,915 --> 00:17:08,026
value at the shortcut


553
00:17:08,026 --> 00:17:09,675
configuration time and you need


554
00:17:09,675 --> 00:17:11,356
one in order to proceed, you can


555
00:17:11,356 --> 00:17:12,665
tell Siri that you need a value.


556
00:17:13,886 --> 00:17:14,836
You need to provide your own


557
00:17:15,076 --> 00:17:16,796
custom prompt dialogue for each


558
00:17:16,796 --> 00:17:17,965
parameter that you can resolve.


559
00:17:19,046 --> 00:17:20,586
To do that, open the Intent


560
00:17:20,586 --> 00:17:20,896
editor.


561
00:17:21,296 --> 00:17:22,455
Select the parameter that you


562
00:17:22,455 --> 00:17:23,556
would like to specify Siri


563
00:17:23,556 --> 00:17:25,425
dialogue for and then type your


564
00:17:25,425 --> 00:17:26,856
custom prompt in the prompt text


565
00:17:26,856 --> 00:17:26,976
field.


566
00:17:30,426 --> 00:17:32,096
If you return disambiguation


567
00:17:32,266 --> 00:17:34,046
Siri will ask the user to pick


568
00:17:34,086 --> 00:17:35,066
from a list of values.


569
00:17:35,846 --> 00:17:37,476
This is a good idea if the value


570
00:17:37,476 --> 00:17:39,096
in the parameter is ambiguous or


571
00:17:39,096 --> 00:17:40,276
if you just have few possible


572
00:17:40,336 --> 00:17:41,496
things for the user to choose


573
00:17:41,496 --> 00:17:41,746
from.


574
00:17:45,576 --> 00:17:47,356
You can customize the


575
00:17:47,586 --> 00:17:50,626
disambiguation dialogue in the


576
00:17:51,236 --> 00:17:53,116
Intent editor.


577
00:17:53,556 --> 00:17:55,076
Return unsupported tells Siri


578
00:17:55,076 --> 00:17:56,576
that your app doesn't support


579
00:17:56,576 --> 00:17:57,326
the provided value.


580
00:17:58,466 --> 00:17:59,946
For example, if customer tries


581
00:17:59,946 --> 00:18:01,616
to order too many soups we can


582
00:18:01,616 --> 00:18:02,906
respond appropriately by saying


583
00:18:02,906 --> 00:18:05,046
that we don't have enough in


584
00:18:05,656 --> 00:18:05,786
stock.


585
00:18:06,006 --> 00:18:07,416
And after that, Siri will


586
00:18:07,416 --> 00:18:08,156
re-prompt the user.


587
00:18:08,766 --> 00:18:12,866
We can define the error messages


588
00:18:13,066 --> 00:18:14,136
that can be shown to the user


589
00:18:14,526 --> 00:18:15,646
under the Validation Error


590
00:18:15,716 --> 00:18:16,616
section in Xcode.


591
00:18:18,126 --> 00:18:19,556
Xcode automatically providers


592
00:18:19,556 --> 00:18:21,076
default behavior for medium and


593
00:18:21,076 --> 00:18:22,916
maximum values that you specify


594
00:18:22,916 --> 00:18:27,006
in the Intent editor.


595
00:18:27,226 --> 00:18:29,226
Return confirmationRequired will


596
00:18:29,226 --> 00:18:30,786
cause Siri to ask the user to


597
00:18:30,786 --> 00:18:31,966
confirm the parameter value.


598
00:18:33,066 --> 00:18:34,586
Use this if it's unclear whether


599
00:18:34,586 --> 00:18:35,756
or not the user actually wants


600
00:18:35,756 --> 00:18:37,566
this value or you have a strong


601
00:18:37,566 --> 00:18:38,846
guess, but still would like to


602
00:18:38,846 --> 00:18:40,856
confirm the value with the user.


603
00:18:44,736 --> 00:18:46,116
Again, you can customize the


604
00:18:46,166 --> 00:18:47,826
Parameter Confirmation prompt in


605
00:18:47,866 --> 00:18:51,066
the Intent editor.


606
00:18:51,596 --> 00:18:53,146
Return success means that we


607
00:18:53,146 --> 00:18:54,956
have a valid parameter value and


608
00:18:54,956 --> 00:18:57,286
Siri should move on to the next


609
00:18:58,656 --> 00:18:58,886
parameter.


610
00:18:58,966 --> 00:19:00,626
Return notRequired means that


611
00:19:00,626 --> 00:19:02,976
your app doesn't need a value


612
00:19:02,976 --> 00:19:04,376
for this parameter at this time,


613
00:19:04,906 --> 00:19:06,376
so Siri should skip it and move


614
00:19:06,376 --> 00:19:07,136
on to the next one.


615
00:19:09,706 --> 00:19:10,846
The Result methods will be


616
00:19:10,846 --> 00:19:11,676
invoked at the shortcut


617
00:19:11,676 --> 00:19:14,486
execution time in both Siri and


618
00:19:14,486 --> 00:19:15,186
the Shortcuts app.


619
00:19:15,936 --> 00:19:17,186
So you need to make sure you


620
00:19:17,186 --> 00:19:18,726
implementation behaves correctly


621
00:19:18,946 --> 00:19:19,966
in both environments.


622
00:19:22,496 --> 00:19:24,216
So now let's take a look at what


623
00:19:24,216 --> 00:19:26,226
the execution flow looks like.


624
00:19:27,056 --> 00:19:28,886
This is the new Shortcuts app


625
00:19:29,356 --> 00:19:30,686
and here in my Shortcuts app you


626
00:19:30,686 --> 00:19:31,826
can see all of the shortcuts


627
00:19:31,826 --> 00:19:33,336
that I created or added from the


628
00:19:33,336 --> 00:19:33,746
Gallery.


629
00:19:34,176 --> 00:19:36,256
To create a new shortcut, I'm


630
00:19:36,256 --> 00:19:37,286
going to tap on the Create


631
00:19:37,286 --> 00:19:37,996
Shortcut button.


632
00:19:38,606 --> 00:19:41,666
In the shortcut editor I need to


633
00:19:41,666 --> 00:19:42,816
add actions to my shortcut.


634
00:19:43,416 --> 00:19:44,716
To do that, I'm going to tap on


635
00:19:44,716 --> 00:19:47,646
the Add Action button.


636
00:19:48,126 --> 00:19:49,766
I use the Soup Chef daily to


637
00:19:49,766 --> 00:19:51,486
order delicious soups, so here's


638
00:19:51,486 --> 00:19:52,586
already a suggestion for me to


639
00:19:52,586 --> 00:19:53,046
order soup.


640
00:19:54,626 --> 00:19:56,276
All I need to do is just give it


641
00:19:56,276 --> 00:19:56,876
a name.


642
00:19:58,266 --> 00:19:59,236
So here's my shortcut.


643
00:19:59,476 --> 00:20:00,436
All I need to do is just give it


644
00:20:00,436 --> 00:20:01,996
a name and save it to My


645
00:20:02,666 --> 00:20:02,976
Shortcuts.


646
00:20:03,046 --> 00:20:04,156
To do that, I'm going to tap on


647
00:20:04,326 --> 00:20:08,366
the Next button.


648
00:20:08,506 --> 00:20:09,516
Let's call this shortcut Order


649
00:20:09,516 --> 00:20:09,766
Soup.


650
00:20:14,176 --> 00:20:15,156
Now let's try invoking the


651
00:20:15,156 --> 00:20:16,506
shortcut with voice and Siri.


652
00:20:17,096 --> 00:20:17,976
"Hey Siri, order soup."


653
00:20:22,356 --> 00:20:23,236
>> Which soup do you want?


654
00:20:23,776 --> 00:20:25,146
We have three specials today.


655
00:20:25,626 --> 00:20:28,106
Clam chowder, tomato soup, or


656
00:20:28,106 --> 00:20:29,716
chicken noodle soup.


657
00:20:29,716 --> 00:20:30,256
>> Clam chowder.


658
00:20:30,256 --> 00:20:33,706
>> There are two restaurants


659
00:20:33,706 --> 00:20:34,346
near you.


660
00:20:34,406 --> 00:20:35,536
Which one do you want to order


661
00:20:35,536 --> 00:20:36,036
from?


662
00:20:36,136 --> 00:20:40,086
38801 S Sheridan Blvd or 7401 S


663
00:20:40,086 --> 00:20:40,976
Lewis Ave?


664
00:20:41,046 --> 00:20:43,936
>> The first one.


665
00:20:44,716 --> 00:20:45,966
>> Ready to order?


666
00:20:46,206 --> 00:20:48,436
>> Yes, please.


667
00:20:49,096 --> 00:20:51,126
>> Okay, ordering.


668
00:20:51,126 --> 00:20:53,266
Your total is $3.75.


669
00:20:54,066 --> 00:20:55,486
Your clam chowder order will be


670
00:20:55,486 --> 00:20:56,266
ready in 10 minutes.


671
00:20:57,066 --> 00:20:58,526
>> And just like that, I ordered


672
00:20:58,526 --> 00:21:00,616
soup with Shortcuts and Siri.


673
00:21:01,516 --> 00:21:06,996
[ Applause ]


674
00:21:07,496 --> 00:21:08,816
Now, let's try writing the same


675
00:21:08,816 --> 00:21:10,176
shortcut from the Shortcuts app.


676
00:21:10,666 --> 00:21:11,936
But before I do that, I would


677
00:21:11,936 --> 00:21:13,086
like to customize the shortcut.


678
00:21:16,216 --> 00:21:17,316
I'm going to tap on the soup


679
00:21:17,316 --> 00:21:18,936
field and select the soup that I


680
00:21:18,936 --> 00:21:20,176
usually order from Soup Chef.


681
00:21:20,896 --> 00:21:24,776
I'm going to select clam


682
00:21:24,776 --> 00:21:24,976
chowder.


683
00:21:29,996 --> 00:21:31,146
Now I'm going to tap on the Done


684
00:21:31,146 --> 00:21:32,156
button to save the shortcut.


685
00:21:35,886 --> 00:21:37,076
Let's try writing the shortcut


686
00:21:37,076 --> 00:21:38,596
from the Shortcuts app by simply


687
00:21:38,596 --> 00:21:41,826
tapping on it.


688
00:21:41,986 --> 00:21:43,256
So here I get presented with the


689
00:21:43,256 --> 00:21:45,056
same disambiguation prompt to


690
00:21:45,056 --> 00:21:46,386
choose a store, just like in


691
00:21:46,386 --> 00:21:46,716
Siri.


692
00:21:47,046 --> 00:21:48,386
I'm going to select the first


693
00:21:48,386 --> 00:21:48,676
option.


694
00:21:52,446 --> 00:21:53,796
And done. I just ordered another


695
00:21:53,796 --> 00:21:54,046
soup.


696
00:21:54,326 --> 00:21:56,566
I guess I'm really hungry today.


697
00:22:02,746 --> 00:22:04,236
Now, let's talk about a few ways


698
00:22:04,296 --> 00:22:06,006
to take our shortcuts even


699
00:22:06,006 --> 00:22:06,566
further.


700
00:22:08,286 --> 00:22:09,576
Wouldn't it be great if I never


701
00:22:09,576 --> 00:22:10,656
have to leave my home to have


702
00:22:10,656 --> 00:22:11,166
some soup?


703
00:22:12,796 --> 00:22:14,166
Yes. And that's why I'm adding


704
00:22:14,166 --> 00:22:15,056
something new in soup shop


705
00:22:15,056 --> 00:22:15,776
delivery.


706
00:22:16,426 --> 00:22:19,356
In the shortcut editor, I want


707
00:22:19,356 --> 00:22:20,626
the user to be able to choose


708
00:22:20,756 --> 00:22:22,136
between delivery and pickup


709
00:22:22,136 --> 00:22:22,646
options.


710
00:22:23,266 --> 00:22:26,026
If they choose delivery, let's


711
00:22:26,026 --> 00:22:27,126
just show them a field that lets


712
00:22:27,126 --> 00:22:28,976
them decide where it should be


713
00:22:28,976 --> 00:22:29,566
delivered to.


714
00:22:30,016 --> 00:22:31,276
For example, to their current


715
00:22:31,276 --> 00:22:31,686
location.


716
00:22:36,476 --> 00:22:37,966
If they choose pickup, we should


717
00:22:37,966 --> 00:22:39,196
show them a field that lets them


718
00:22:39,196 --> 00:22:40,756
decide which store to order


719
00:22:41,456 --> 00:22:41,656
from.


720
00:22:42,496 --> 00:22:44,216
To make that work, we need to


721
00:22:44,216 --> 00:22:45,566
express parameter relationships


722
00:22:45,566 --> 00:22:48,536
in the Intent editor.


723
00:22:48,606 --> 00:22:49,926
So let's start by taking a look


724
00:22:49,926 --> 00:22:50,836
at all of the parameters


725
00:22:50,836 --> 00:22:51,516
involved in this.


726
00:22:52,196 --> 00:22:53,416
We have the orderType parameter


727
00:22:53,786 --> 00:22:55,056
which has two possible values;


728
00:22:55,386 --> 00:22:56,766
delivery and pickup.


729
00:22:57,696 --> 00:22:58,706
We also have parameters for


730
00:22:58,706 --> 00:23:00,966
deliverLocation and


731
00:23:01,696 --> 00:23:02,206
storeLocation.


732
00:23:02,326 --> 00:23:03,296
Now, let's take a look at the


733
00:23:03,296 --> 00:23:04,296
Relationship section.


734
00:23:05,746 --> 00:23:07,216
Here for my deliverLocation


735
00:23:07,216 --> 00:23:08,836
parameter I'd like to specify


736
00:23:08,836 --> 00:23:10,166
the Parent Parameter to be the


737
00:23:10,166 --> 00:23:11,046
orderType parameter.


738
00:23:11,936 --> 00:23:13,226
I only want to show my


739
00:23:13,226 --> 00:23:14,586
deliveryLocation parameter if


740
00:23:14,586 --> 00:23:15,806
the parent parameter has the


741
00:23:15,806 --> 00:23:17,886
value of delivery.


742
00:23:17,966 --> 00:23:19,376
And exactly the same thing for


743
00:23:19,376 --> 00:23:20,446
the storeLocation parameter.


744
00:23:20,786 --> 00:23:22,066
I only want to show it if the


745
00:23:22,116 --> 00:23:23,396
parent orderType parameter has


746
00:23:23,396 --> 00:23:23,976
the value of pickup.


747
00:23:27,696 --> 00:23:29,086
So now my users are able to


748
00:23:29,086 --> 00:23:30,566
easily switch between different


749
00:23:30,566 --> 00:23:30,956
order types.


750
00:23:33,776 --> 00:23:34,496
Let's see how to do this in


751
00:23:34,496 --> 00:23:34,976
Xcode.


752
00:23:37,296 --> 00:23:38,986
So I have the Soup Chef project


753
00:23:38,986 --> 00:23:39,486
open here.


754
00:23:40,196 --> 00:23:41,336
I'm going to select the Intent


755
00:23:41,336 --> 00:23:42,036
definition file.


756
00:23:42,396 --> 00:23:43,596
This is where I define all my


757
00:23:43,596 --> 00:23:44,066
Intents.


758
00:23:45,566 --> 00:23:47,636
I already have Intent for order


759
00:23:47,636 --> 00:23:47,916
soup.


760
00:23:48,726 --> 00:23:49,406
Let's take a look at the


761
00:23:49,406 --> 00:23:49,966
parameters.


762
00:23:50,406 --> 00:23:51,956
We have soup, quantity,


763
00:23:52,266 --> 00:23:53,606
toppings, store location.


764
00:23:54,426 --> 00:23:55,576
Now let's scroll down to a new


765
00:23:55,576 --> 00:23:56,846
section in Xcode that we have


766
00:23:56,906 --> 00:23:57,756
called Shortcuts app.


767
00:23:59,096 --> 00:24:00,556
Here you can see the -- all the


768
00:24:00,556 --> 00:24:01,806
Support Parameter combinations


769
00:24:01,806 --> 00:24:03,246
by the Shortcuts app and the


770
00:24:03,246 --> 00:24:04,286
corresponding summaries.


771
00:24:04,966 --> 00:24:06,286
You can also see the preview of


772
00:24:06,336 --> 00:24:07,256
what it's going to look like in


773
00:24:07,256 --> 00:24:07,516
the app.


774
00:24:09,116 --> 00:24:10,086
So currently we have the


775
00:24:10,086 --> 00:24:12,146
storeLocation and we have the


776
00:24:12,146 --> 00:24:13,566
summary which says, order


777
00:24:13,566 --> 00:24:15,276
quantity soup for pickup from


778
00:24:15,276 --> 00:24:15,996
storeLocation.


779
00:24:16,926 --> 00:24:18,666
I didn't put toppings in my


780
00:24:18,666 --> 00:24:21,196
summary so it appears under More


781
00:24:21,196 --> 00:24:21,646
Options.


782
00:24:22,766 --> 00:24:24,746
Now, let's go up and add a


783
00:24:24,746 --> 00:24:25,816
couple more parameters to


784
00:24:25,816 --> 00:24:26,516
support delivery.


785
00:24:27,296 --> 00:24:28,306
I'm going to click on the plus


786
00:24:28,306 --> 00:24:30,336
(+) button and add a new


787
00:24:30,336 --> 00:24:31,426
parameter called orderType.


788
00:24:31,426 --> 00:24:34,086
I'm going to specify a display


789
00:24:34,086 --> 00:24:34,936
name for this parameter.


790
00:24:43,716 --> 00:24:45,096
So if I scroll down to the


791
00:24:45,096 --> 00:24:46,286
Shortcuts app section you can


792
00:24:46,286 --> 00:24:47,076
see that the Order Type


793
00:24:47,076 --> 00:24:48,266
parameter now appears under More


794
00:24:48,266 --> 00:24:49,776
Options and it was automatically


795
00:24:49,776 --> 00:24:51,086
added to the Support Parameter


796
00:24:51,086 --> 00:24:51,526
combination.


797
00:24:52,336 --> 00:24:52,796
Let's scroll up.


798
00:24:53,756 --> 00:24:55,176
Let's specify a new type for the


799
00:24:55,176 --> 00:24:55,936
Order Type parameter.


800
00:24:56,496 --> 00:24:58,136
I'm going to add a new enum.


801
00:24:59,316 --> 00:25:00,556
Let's call this enum Order Type.


802
00:25:04,046 --> 00:25:05,266
I will also specify the display


803
00:25:05,266 --> 00:25:08,746
name for this type.


804
00:25:08,956 --> 00:25:10,236
Now we add to add two cases;


805
00:25:10,336 --> 00:25:11,276
delivery and pickup.


806
00:25:11,776 --> 00:25:12,846
Let's start with delivery.


807
00:25:12,956 --> 00:25:14,746
I'm going to click on a plus (+)


808
00:25:14,746 --> 00:25:14,996
button.


809
00:25:16,166 --> 00:25:16,796
Type delivery.


810
00:25:17,566 --> 00:25:20,546
I will also specify display


811
00:25:20,546 --> 00:25:20,776
name.


812
00:25:21,386 --> 00:25:24,616
Let's add another case for


813
00:25:24,686 --> 00:25:24,966
pickup.


814
00:25:28,486 --> 00:25:29,376
Also provide display name.


815
00:25:30,116 --> 00:25:33,926
Since my users can refer to


816
00:25:33,966 --> 00:25:35,386
pickup as take out when they


817
00:25:35,386 --> 00:25:37,216
speak to Siri, we can add this


818
00:25:37,216 --> 00:25:38,016
as a speakable match.


819
00:25:38,506 --> 00:25:39,526
So I'm going to click on a plus


820
00:25:39,526 --> 00:25:40,906
(+) button and add take out.


821
00:25:44,766 --> 00:25:49,186
Now let's go back to the Intent.


822
00:25:49,256 --> 00:25:50,176
Now we need to add another


823
00:25:50,216 --> 00:25:51,746
parameter called Delivery


824
00:25:51,746 --> 00:25:51,976
Location.


825
00:25:56,526 --> 00:25:57,936
Let's also give it a display


826
00:25:57,936 --> 00:25:59,526
name, Delivery Location.


827
00:26:04,936 --> 00:26:06,776
So now let's scroll down and see


828
00:26:07,576 --> 00:26:08,106
what we have there.


829
00:26:08,916 --> 00:26:09,766
We still have the single


830
00:26:09,766 --> 00:26:10,816
parameter combination which


831
00:26:10,926 --> 00:26:12,436
contains all of the parameters.


832
00:26:13,656 --> 00:26:14,546
But it doesn't make sense to


833
00:26:14,546 --> 00:26:15,876
have both Store Location and


834
00:26:15,876 --> 00:26:17,036
Delivery Location at the same


835
00:26:17,036 --> 00:26:17,266
time.


836
00:26:17,586 --> 00:26:17,966
Let's fix this.


837
00:26:21,046 --> 00:26:21,846
We're going to scroll up to the


838
00:26:21,846 --> 00:26:22,606
parameters section.


839
00:26:23,736 --> 00:26:24,636
Select the Store Location


840
00:26:24,636 --> 00:26:26,566
parameter, expand the


841
00:26:26,566 --> 00:26:28,376
Relationship section, and select


842
00:26:28,376 --> 00:26:29,606
the parent parameter to be the


843
00:26:29,606 --> 00:26:29,956
orderType.


844
00:26:29,956 --> 00:26:32,506
I only want to show my Store


845
00:26:32,506 --> 00:26:34,476
Location parameter if the parent


846
00:26:34,476 --> 00:26:35,376
orderType parameter has the


847
00:26:35,376 --> 00:26:36,386
value of pick up.


848
00:26:37,856 --> 00:26:39,036
Let's do exactly the same thing


849
00:26:39,036 --> 00:26:39,986
for the Delivery Location


850
00:26:39,986 --> 00:26:40,346
parameter.


851
00:26:41,196 --> 00:26:42,226
Let's select the parent


852
00:26:42,226 --> 00:26:43,286
parameter to be the orderType.


853
00:26:44,396 --> 00:26:45,736
Show if parent has exact value


854
00:26:46,256 --> 00:26:46,816
of delivery.


855
00:26:48,046 --> 00:26:49,046
Now, let's go down to the


856
00:26:49,046 --> 00:26:50,366
Shortcuts app section and take a


857
00:26:50,366 --> 00:26:51,036
look what we have there.


858
00:26:51,696 --> 00:26:53,196
Xcode automatically created two


859
00:26:53,266 --> 00:26:54,516
more parameter combinations for


860
00:26:54,516 --> 00:26:54,706
us.


861
00:26:55,226 --> 00:26:56,356
Let's fill out summaries for


862
00:26:56,356 --> 00:26:58,506
each of them.


863
00:26:58,506 --> 00:27:02,566
So will be the Order quantity,


864
00:27:04,126 --> 00:27:08,366
soup for orderType.


865
00:27:09,296 --> 00:27:11,086
Now let's imagine user taps on


866
00:27:11,086 --> 00:27:12,106
the orderType field in the


867
00:27:12,106 --> 00:27:13,546
Shortcuts app and they select


868
00:27:13,616 --> 00:27:13,906
pickup.


869
00:27:14,406 --> 00:27:15,666
In this case, they will see the


870
00:27:15,666 --> 00:27:16,556
parameter combination that


871
00:27:16,596 --> 00:27:17,596
contains storeLocation.


872
00:27:19,706 --> 00:27:21,066
So I already have the summary


873
00:27:21,066 --> 00:27:22,186
for this parameter combination,


874
00:27:22,826 --> 00:27:24,186
but I had a hard coded value for


875
00:27:24,186 --> 00:27:24,856
the pickup.


876
00:27:25,126 --> 00:27:26,326
Let's change this to be a


877
00:27:26,376 --> 00:27:27,596
parameter orderType.


878
00:27:28,716 --> 00:27:30,496
And finally, we need to update


879
00:27:30,496 --> 00:27:31,576
the last parameter combination,


880
00:27:32,296 --> 00:27:32,826
which includes the


881
00:27:32,826 --> 00:27:34,036
deliveryLocation parameter.


882
00:27:34,966 --> 00:27:36,056
Let's add the summary.


883
00:27:36,386 --> 00:27:41,216
Order quantity soup for


884
00:27:41,666 --> 00:27:46,126
orderType to deliveryLocation.


885
00:27:47,366 --> 00:27:48,966
Let's take a step back and take


886
00:27:48,966 --> 00:27:49,926
a look at what we just did.


887
00:27:50,676 --> 00:27:52,286
First, we identified parent and


888
00:27:52,286 --> 00:27:53,596
child parameters in our Intent.


889
00:27:54,456 --> 00:27:55,296
And then, we established


890
00:27:55,296 --> 00:27:56,796
parameter relationship between


891
00:27:56,796 --> 00:27:57,886
parent and child parameters.


892
00:27:58,616 --> 00:27:59,846
And finally, we updated


893
00:27:59,916 --> 00:28:01,186
summaries for each parameter


894
00:28:01,186 --> 00:28:02,976
combination so they look great


895
00:28:02,976 --> 00:28:03,696
in the Shortcuts app.


896
00:28:07,016 --> 00:28:08,256
Now, let's talk about Dynamic


897
00:28:08,256 --> 00:28:08,756
Options.


898
00:28:10,926 --> 00:28:12,486
Most parameters such as String


899
00:28:12,486 --> 00:28:14,116
or Number have obvious input


900
00:28:14,116 --> 00:28:15,946
mechanisms, an input field in


901
00:28:15,946 --> 00:28:16,576
the Shortcuts app.


902
00:28:18,766 --> 00:28:20,226
We're asking a user to specify


903
00:28:20,226 --> 00:28:21,236
some values here.


904
00:28:25,006 --> 00:28:26,476
For some parameters you may want


905
00:28:26,476 --> 00:28:28,176
to allow the user to pick from a


906
00:28:28,276 --> 00:28:30,196
fixed set of values and have


907
00:28:30,196 --> 00:28:31,426
those values be dynamically


908
00:28:31,426 --> 00:28:33,036
provided by your app when the


909
00:28:33,036 --> 00:28:34,286
user is setting up the shortcut.


910
00:28:35,496 --> 00:28:36,826
For my Store Location parameter


911
00:28:37,006 --> 00:28:38,196
I wanted the user to be able to


912
00:28:38,196 --> 00:28:39,646
choose from a list of stores


913
00:28:39,706 --> 00:28:40,256
close to them.


914
00:28:42,756 --> 00:28:44,076
In order to accomplish that I'm


915
00:28:44,076 --> 00:28:45,036
going to check the Dynamic


916
00:28:45,036 --> 00:28:46,886
Options checkbox for my Store


917
00:28:46,886 --> 00:28:47,666
Location parameter.


918
00:28:50,226 --> 00:28:51,946
Once I do that, Xcode will


919
00:28:52,016 --> 00:28:53,906
cogenerate two additional


920
00:28:53,906 --> 00:28:55,106
intent handling protocol methods.


921
00:28:56,056 --> 00:28:57,446
The first one provides store


922
00:28:57,446 --> 00:28:58,256
location options.


923
00:28:58,906 --> 00:29:00,476
And another one for providing a


924
00:29:00,476 --> 00:29:01,446
default value for this


925
00:29:01,446 --> 00:29:01,846
parameter.


926
00:29:05,566 --> 00:29:06,916
In your provide options method


927
00:29:07,226 --> 00:29:08,666
you need to return the current


928
00:29:08,666 --> 00:29:10,336
set of possible values I the


929
00:29:10,336 --> 00:29:11,146
completion handler.


930
00:29:16,496 --> 00:29:17,306
You will also have the


931
00:29:17,306 --> 00:29:18,496
opportunity to provide default


932
00:29:18,496 --> 00:29:19,916
values for parameters with


933
00:29:19,916 --> 00:29:20,956
Dynamic Options enabled.


934
00:29:26,346 --> 00:29:27,676
When your parameter of Dynamic


935
00:29:27,676 --> 00:29:29,726
Options is being resolved during


936
00:29:29,726 --> 00:29:31,986
the shortcut execution time and


937
00:29:31,986 --> 00:29:33,596
your return needs value in the


938
00:29:33,596 --> 00:29:35,296
completion handler of your


939
00:29:35,296 --> 00:29:37,376
Resolve method, Siri will


940
00:29:37,376 --> 00:29:38,556
automatically use the list of


941
00:29:38,556 --> 00:29:40,526
options you provided in the form


942
00:29:40,526 --> 00:29:41,646
of a disambiguation prompt.


943
00:29:46,136 --> 00:29:47,596
Lastly, I want users to be able


944
00:29:47,596 --> 00:29:48,686
to make more shortcuts work


945
00:29:48,686 --> 00:29:49,926
together with other actions.


946
00:29:51,796 --> 00:29:53,096
For example, a user could set up


947
00:29:53,096 --> 00:29:54,586
a shortcut that places an order


948
00:29:54,586 --> 00:29:57,726
and then sends a message with


949
00:29:57,726 --> 00:29:58,976
order details to their friend


950
00:29:59,076 --> 00:29:59,836
who usually picks up their


951
00:29:59,836 --> 00:29:59,976
order.


952
00:30:02,806 --> 00:30:04,476
In Xcode 11 we are introducing


953
00:30:04,476 --> 00:30:05,706
the ability to define your own


954
00:30:05,706 --> 00:30:08,856
custom tabs that you can use in


955
00:30:08,856 --> 00:30:09,866
both Intent and Intent


956
00:30:09,866 --> 00:30:10,416
responses.


957
00:30:10,986 --> 00:30:12,146
So I'm going to define a new


958
00:30:12,146 --> 00:30:13,626
custom type called Order


959
00:30:13,626 --> 00:30:15,906
Details, which contains proper


960
00:30:15,906 --> 00:30:17,236
sets of information that I want


961
00:30:17,236 --> 00:30:18,436
to pass on to another action.


962
00:30:19,776 --> 00:30:20,996
In this example I'm going to


963
00:30:20,996 --> 00:30:22,746
define two properties; Order


964
00:30:22,746 --> 00:30:23,976
Estimated Time and Total.


965
00:30:26,476 --> 00:30:27,876
As you might know an in turn


966
00:30:27,876 --> 00:30:29,406
response is a logical result of


967
00:30:29,406 --> 00:30:30,456
an execution of an attempt.


968
00:30:31,306 --> 00:30:32,376
It contains properties that


969
00:30:32,416 --> 00:30:33,646
convey the result to the user.


970
00:30:35,096 --> 00:30:36,476
To add an output, I need to


971
00:30:36,476 --> 00:30:37,986
define a new property of my


972
00:30:38,066 --> 00:30:38,976
custom orderDetails type.


973
00:30:42,046 --> 00:30:43,976
And then, I need to designate


974
00:30:43,976 --> 00:30:45,176
this property as the output.


975
00:30:50,106 --> 00:30:51,536
When the user taps on the Order


976
00:30:51,536 --> 00:30:53,296
Details variable in the shortcut


977
00:30:53,296 --> 00:30:55,216
editor, they will get presented


978
00:30:55,266 --> 00:30:56,776
with an option to choose one of


979
00:30:56,776 --> 00:30:58,056
the properties that I just


980
00:30:58,056 --> 00:30:58,936
defined in my custom type.


981
00:31:03,226 --> 00:31:04,366
It can also use custom members


982
00:31:04,366 --> 00:31:06,056
of your custom types in response


983
00:31:06,396 --> 00:31:07,296
templates for Siri.


984
00:31:07,776 --> 00:31:09,056
So the same data that is passed


985
00:31:09,056 --> 00:31:10,856
as the output can be spoken


986
00:31:10,856 --> 00:31:11,416
aloud.


987
00:31:14,896 --> 00:31:15,906
Today you learned how you can


988
00:31:15,906 --> 00:31:17,186
allow users to customize your


989
00:31:17,186 --> 00:31:18,666
shortcuts in the new built-in


990
00:31:18,666 --> 00:31:19,726
Shortcuts app.


991
00:31:19,726 --> 00:31:20,836
You also learned how you can


992
00:31:20,836 --> 00:31:22,146
provide conversational shortcuts


993
00:31:22,146 --> 00:31:22,536
in Siri.


994
00:31:23,616 --> 00:31:24,806
Choose the right parameters for


995
00:31:24,806 --> 00:31:26,506
each Intent so your app can


996
00:31:26,556 --> 00:31:27,716
correctly respond to the user


997
00:31:27,876 --> 00:31:28,736
each step of the way.


998
00:31:29,966 --> 00:31:31,346
You can extend the power of your


999
00:31:31,346 --> 00:31:33,306
shortcuts with other apps using


1000
00:31:33,306 --> 00:31:36,576
Outputs in the Shortcuts app.


1001
00:31:36,936 --> 00:31:37,846
We have another session on


1002
00:31:37,846 --> 00:31:39,026
Friday where my colleagues will


1003
00:31:39,026 --> 00:31:40,476
talk about design and building


1004
00:31:40,476 --> 00:31:41,256
great shortcuts.


1005
00:31:41,816 --> 00:31:43,096
You can also find us in the labs


1006
00:31:43,206 --> 00:31:43,736
throughout the week.


1007
00:31:44,756 --> 00:31:46,226
Thank you so much for coming and


1008
00:31:46,226 --> 00:31:46,916
enjoy the rest of your


1009
00:31:46,916 --> 00:31:47,416
conference.


1010
00:31:48,516 --> 00:31:58,500
[ Applause ]

